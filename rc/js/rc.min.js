rc=rc||{},rc.params={},rc.ui=rc.ui||{},rc.comp=rc.comp||{},rc.comp.remoting=rc.comp.remoting||{},rc.dataModal=rc.dataModal||{},rc.wf=rc.wf||{},rc.upsertData=rc.upsertData||{},rc.sessionId;var sessionList={};rc.initializeFormApp=function(){if(rc.initializeParams(),$("body").addClass("rc-content-css"),!rc.isEditMode){data=rc.selectedForm||{},data.containers=data.containers||[],data.workflows=data.workflows||[],data.data=data.data||{},rc.comp.importContentCSS($("html"),data.styles),rc.comp.updateContentCSS($("html")),rc.validationsEnabled=data.data["validations-enabled"]||"false",data.data["theme-href"]&&data.data["theme-name"]&&($("#rc-theme-link").attr("href",data.data["theme-href"]),$("#rc-theme-link").attr("data-name",data.data["theme-name"]));var a=$("#rc-component-workflow-action--workflow").find(".dropdown-menu");a.empty(),$(data.workflows).each(function(b,c){try{var d=$('<a class="rc-cascade-dropdown-text rc-cursor-pointer rc-cascade-value"></a>');d.attr("data-cascade","data-value"),d.attr("data-value",c.data.guid),d.text(rc.text(c.data.name)),a.append(d.wrap("<li></li>").parent())}catch(e){console.error("[ERROR]",e)}}),$(data.workflows).each(function(a,b){rc.comp.insertWorkflow("#rc-workflows-list",b)}),$(data.containers).each(function(a,b){rc.comp.insertColumnList("#rc-container-list",b)}),rc.rollupDefaultValues();var b=rc.getParamVal("data");null!=b&&""!=b?rc.selectData():(rc.validate.initialize(),rc.ui.setDropdownVisible(),rc.ui.removeRedundantOpacity())}},rc.selectData=function(a,b){return a=a||new jQuery.Deferred,b=b||{},b.__action=rc.actions.selectData,rc.comp.remoting.send(a,b,rc.selectData.done,rc.selectData.fail),a.promise()},rc.selectData.done=function(a,b,c){var e=$(".form-control[name]");rc.dataModal.BatchUploadModel=$.extend(rc.dataModal.BatchUploadModel,c),$.each(c,function(a,b){rc.validateProductSlot(a,b),e.filter('[name="'+a+'"]').val(b),"true"==e.filter('[name="'+a+'"]').val()&&e.filter('[name="'+a+'"]').filter('[type="checkbox"]').prop("checked","checked")}),rc.comp.Cart.renderUpsertData(c),rc.comp.Attribute.renderUpsertData(c),rc.comp.CampaignAsk.populateData(c),rc.comp.Session.renderUpsertData(c);var f=$('[data-cascade="exclude-giving"][is-old="true"]');f&&f.length>0&&c&&c[rc.ns+"exclude_giving__c"]&&$('#rc-workflows-list [data-method="send-data"] [data-cascade="exclude-giving"][data-value="'+c[rc.ns+"exclude_giving__c"]+'"].btn').click(),rc.validate.initialize(),rc.ui.setDropdownVisible(),rc.ui.removeRedundantOpacity()},rc.selectData.fail=function(a,b,c,d){console.error("rc.selectData.fail"),console.error("this",this),console.error("send",b),console.error("recv",c),console.error("meta",d)},rc.initializeParams=function(){var a=(window.location.hash||"#mode=view").substring(1);null!=a&&$(a.split("&")).each(function(){var a=this.split("=");null!=a[0]&&""!=a[0]&&("true"==a[1]&&(a[1]=!0),"false"==a[1]&&(a[1]=!1),rc.setParam(a[0],a[1]))})},rc.getParam=function(a){return/mode/.test(a)&&/false/.test(rc.isEditMode)?"view":rc.params[a]||null},rc.setParam=function(a,b){if(!/mode/.test(a)||!/false/.test(rc.isEditMode)){rc.params[a]=b;var c="";for(a in rc.params)b=rc.params[a],null!=b&&(c+=""==c?"#":"&",c+=a+"="+b);window.location.hash=c}},rc.getParamVal=function(a){for(var b=window.location.href.match(/[^=&?]+\s*=\s*[^&#]*/g),c=b.length;c--;){var d=b[c].split("=");if(d[0].toLowerCase()==a.toLowerCase()||d[0].toLowerCase()==a.toLowerCase())return d[1]}return null},rc.applyDefaultAttributeDefaultValues=function(a,b){var a=$(a)||{},b=b||{};$($(a).find(".rc-field-name")).each(function(){var a=$(this),c=b[a.attr("name")]||"";a.attr("data-field-default",c)})},rc.applyPlaceholderAttributeValues=function(a,b){var a=$(a)||{},b=b||{};$($(a).find(".form-control")).each(function(){var a=$(this),c=b[a.attr("name")]||b[a.attr("data-name")]||a.attr("placeholder")||"";a.attr("placeholder",c)})},rc.rollupDefaultValues=function(){var c=$("[data-field-default]");c.length&&$(c).each(function(a,b){var b=$(b),c=b.attr("data-field-default")||"";"checkbox"==b.attr("type")?(b.attr("data-field-default",c),b.prop("checked","true"==c)):(0==b.val()||""==b.val())&&b.val(c)})},rc.reenable=function(a){a&&a.prop("disabled",!1)},rc.reInitProductSlots=function(){$(".rc-component").each(function(a,b){rc.updateProductSlots($(b))})},rc.getCurrentMode=function(){return rc.getParam("mode")||"view"},rc.initializeSessionId=function(a,b){rc.sessionId="true"==a?rc.litleSessionIdPrefix+"-"+b:rc.litleSessionId},rc.initializeViewSelector=function(a,b,c){var d=a.data.selectedViewComponents;a.data.componentSelectDataArray=[],d&&(a.data.componentSelectDataArray=d.split(",")),a.component.find(".view-component-select").select2({data:b,placeholder:"Select view components"}),a.data.componentSelectDataArray&&0!=a.data.componentSelectDataArray.length||(a.data.componentSelectDataArray=c),a.component.find(".view-component-select").val(a.data.componentSelectDataArray).trigger("change"),a.component.find(".view-component-select").on("change",function(){a.data.componentSelectDataArray=a.component.find(".view-component-select").val(),rc.initializeViewSelector.rerender(a)})},rc.initializeViewSelector.rerender=function(a){a.data.componentSelectDataArray=a.data.componentSelectDataArray?a.data.componentSelectDataArray:[],a.component.find(".default-hide").hide();for(var b=0;b<a.data.componentSelectDataArray.length;++b){var c=a.data.componentSelectDataArray[b];a.component.find("."+c).show()}},rc.productSlots=[rc.ns+"product_1_product_code__c",rc.ns+"product_2_product_code__c",rc.ns+"product_3_product_code__c",rc.ns+"product_4_product_code__c",rc.ns+"product_5_product_code__c",rc.ns+"product_6_product_code__c",rc.ns+"product_7_product_code__c",rc.ns+"product_8_product_code__c",rc.ns+"product_9_product_code__c",rc.ns+"product_10_product_code__c",rc.ns+"product_11_product_code__c",rc.ns+"product_12_product_code__c",rc.ns+"product_13_product_code__c",rc.ns+"product_14_product_code__c",rc.ns+"product_15_product_code__c",rc.ns+"product_16_product_code__c",rc.ns+"product_17_product_code__c",rc.ns+"product_18_product_code__c",rc.ns+"product_19_product_code__c",rc.ns+"product_20_product_code__c"],rc.prodMap={},rc.prodMap[rc.ns+"product_1_product_code__c"]=rc.ns+"product_1",rc.prodMap[rc.ns+"product_2_product_code__c"]=rc.ns+"product_2",rc.prodMap[rc.ns+"product_3_product_code__c"]=rc.ns+"product_3",rc.prodMap[rc.ns+"product_4_product_code__c"]=rc.ns+"product_4",rc.prodMap[rc.ns+"product_5_product_code__c"]=rc.ns+"product_5",rc.prodMap[rc.ns+"product_6_product_code__c"]=rc.ns+"product_6",rc.prodMap[rc.ns+"product_7_product_code__c"]=rc.ns+"product_7",rc.prodMap[rc.ns+"product_8_product_code__c"]=rc.ns+"product_8",rc.prodMap[rc.ns+"product_9_product_code__c"]=rc.ns+"product_9",rc.prodMap[rc.ns+"product_10_product_code__c"]=rc.ns+"product_10",rc.prodMap[rc.ns+"product_11_product_code__c"]=rc.ns+"product_11",rc.prodMap[rc.ns+"product_12_product_code__c"]=rc.ns+"product_12",rc.prodMap[rc.ns+"product_13_product_code__c"]=rc.ns+"product_13",rc.prodMap[rc.ns+"product_14_product_code__c"]=rc.ns+"product_14",rc.prodMap[rc.ns+"product_15_product_code__c"]=rc.ns+"product_15",rc.prodMap[rc.ns+"product_16_product_code__c"]=rc.ns+"product_16",rc.prodMap[rc.ns+"product_17_product_code__c"]=rc.ns+"product_17",rc.prodMap[rc.ns+"product_18_product_code__c"]=rc.ns+"product_18",rc.prodMap[rc.ns+"product_19_product_code__c"]=rc.ns+"product_19",rc.prodMap[rc.ns+"product_20_product_code__c"]=rc.ns+"product_20",rc.getProductSlot=function(){return 0==rc.productSlots.length?null:rc.productSlots.shift()},rc.emptyProductSlot=function(a){a&&null!=a&&void 0!=a&&rc.productSlots.push(a)},rc.occupyProductSlot=function(a){var b=rc.productSlots.indexOf(a);b>-1&&rc.productSlots.length>0&&rc.productSlots.splice(b,1)},rc.validateProductSlot=function(a,b){var c=rc.productSlots.indexOf(a);c>-1&&rc.productSlots.length>0&&b&&""!=$.trim(b)&&rc.productSlots.splice(c,1)},rc.getIfProductSlotAvailable=function(a){return rc.productSlots.indexOf(a)>-1&&rc.productSlots.length>1},rc.updateProductSlots=function(a){var c,b=a.attr("data-component-type");"attribute"==b?(c=a.find(".rc-field-name").attr("name"),rc.emptyProductSlot(c)):"cart"==b?a.find(".product-entry-row[data-product-slot]").each(function(a,b){return(c=$(b).attr("data-product-slot"))?void rc.emptyProductSlot(c):!0}):"session"==b&&a.find(".session-entry-row[data-session-slot]").each(function(a,b){return(c=$(b).attr("data-session-slot"))?void rc.emptyProductSlot(c):!0})},rc.text=function(a){return $("<div></div>").html(a).text()},rc.html_decode=function(a){return a=a||"",a=a.replace(new RegExp("&amp;","g"),"&"),a=a.replace(new RegExp("&quot;","g"),'"'),a=a.replace(new RegExp("&#39;","g"),"'"),a=a.replace(new RegExp("&lt;","g"),"<"),a=a.replace(new RegExp("&gt;","g"),">")},rc.cleanKeysToLower=function(a){for(var b,c=rc.getKeys(a),d=c.length,e={};d--;)b=c[d],e[b.toLowerCase()]=a[b];return e},rc.getKeys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},rc.isNumericOrNull=function(a){return!a||/^[-+]?[0-9]*\.?[0-9]+$/.test(a)},rc.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},rc.stripTags=function(a,b){var c=a||"";return c=c.replace(RegExp("</?"+b+"[^<>]*>","gi"),"")},rc.filterComponentData=function(a){return $(a).each(function(a,b){var c=b||{};c.data=c.data||{},c.type=c.type||"",c.styles=c.styles||{},c.defaultValues=c.defaultValues||{}}),a},rc.setHiddenFieldAttribute=function(a,b){var c=a.find(".rc-component-content");return 1==c.hasClass("rc-always-hidden-in-view")?!0:(a=$(a)||"",b=b||"",c.attr("data-field-hidden","true"==b),!0)},Number.prototype.formatMoney=function(a,b,c){var d=this,a=isNaN(a=Math.abs(a))?2:a,b=void 0==b?".":b,c=void 0==c?",":c,e=d<0?"-":"",f=parseInt(d=Math.abs(+d||0).toFixed(a))+"",g=(g=f.length)>3?g%3:0;return e+(g?f.substr(0,g)+c:"")+f.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+c)+(a?b+Math.abs(d-f).toFixed(a).slice(2):"")},rc.ui.SUCCESS="alert-success",rc.ui.ERROR="alert-danger",rc.ui.WARNING="alert-warning",rc.ui.INFO="alert-info",rc.ui.MessageHeaders={},rc.ui.MessageHeaders[rc.ui.SUCCESS]="Yay",rc.ui.MessageHeaders[rc.ui.ERROR]="Attention!",rc.ui.MessageHeaders[rc.ui.WARNING]="Warning!",rc.ui.MessageHeaders[rc.ui.INFO]="",rc.ui.CONTACT_MAIL1="<Contact Mail 1>",rc.ui.CONTACT_MAIL2="<Contact Mail 2>",rc.ui.MergeFieldMap={},rc.ui.MergeFieldMap[rc.ui.CONTACT_MAIL1]={field:rc.ns+"contact_1_email__c",control:rc.ns+"contact_1_email_opt_out__c"},rc.ui.MergeFieldMap[rc.ui.CONTACT_MAIL2]={field:rc.ns+"contact_2_email__c",control:rc.ns+"contact_2_email_opt_out__c"},rc.ui.markProcessing=function(){rc.ui.markProcessing.queue.push(!0),$("#rc-ui-icon-processing").show()},rc.ui.markProcessingDone=function(a){1==rc.ui.markProcessing.queue.length&&$("#rc-ui-icon-processing").hide(),null!=a&&0==a.modified&&$("#rc-ui-icon-unsaved-changes").hide(),rc.ui.markProcessing.queue.pop()},rc.ui.markProcessing.queue=[],rc.ui.setDropdownVisible=function(){var a="  #rc-page-container .rc-component-content [data-field-hidden='true'] .rc-opacity-md , #rc-page-container .rc-component-merge-field-content.rc-opacity-md ";$(a).each(function(a,b){b=$(b);var c=b.find("[data-opacity-target='true'], .rc-field-menu");b.removeClass("rc-opacity-md"),c.length>0&&c.addClass("rc-opacity-md rc-requires-edit"),b.closest(".rc-component-content").hasClass("rc-opacity-md")&&b.closest(".rc-component-content").removeClass("rc-opacity-md")})},rc.ui.setDefaultValue=function(a){if("view"==rc.getCurrentMode())return!0;{var b=$(this)||$(a.target),c=b.val()||"";b.attr("data-field-default")}if("checkbox"==b.attr("type")){var e=b.closest("[data-field-default]").is(":checked")?!0:!1;b.closest("[data-field-default]").attr("data-field-default",e)}else b.closest("[data-field-default]").attr("data-field-default",c);return!0},rc.ui.removeRedundantOpacity=function(){$("#rc-page-container .rc-default-hidden").each(function(a,b){b=$(this)||"",b.removeClass("rc-opacity-md"),b.find(".fa-eye-slash").remove(),b.find(".rc-field-text").prepend('<span class="fa fa-fw fa-eye-slash pull-right rc-margin-xs rc-tooltip" data-toggle="tooltip" data-title="Hidden Field"></span>'),b.find("[data-opacity-target='true']").each(function(a,b){return b=$(b)||"",1==b.hasClass("rc.opacity-md")?!0:void b.addClass("rc-opacity-md rc-requires-edit")})}),$(".rc-toggle-dropdown").addClass("rc-requires-edit")},rc.ui.showMessagePopup=function(a,b){b=b||"",b=$.trim(b);var c=$(".info-message-container"),d=c.find(".message-box .message").html()||"";-1==d.indexOf(b)&&(c.find(".message-box").length&&"error"===a&&-1==d.indexOf(b)&&(b=d+"<br/><br/>"+b),c.find(".message-box").remove(),c.prepend($("#message-box-template").html()),c.find(".message-box .message").html(b),c.find(".message-box").addClass(a),b.length>50&&(c.find(".message-box").css("left","28%"),c.find(".message-box").css("width","37.5%")),c.find(".message-box").show(),c.find(".message-box").unbind("click").click(function(){c.find(".message-box").fadeOut(1e3,function(){$(this).remove()})}))},rc.ui.addMessageToComponent=function(a,b,c,d){a=a||$("body");var e=$(a).closest(".rc-container-column").find(".component-alert .message-text:contains("+b+")");if(e.length)return e.closest(".component-alert ");var f=$("#rc-alert-item.rc-template").html(),g=$(f);return c=c||rc.ui.WARNING,b=b||"",g.addClass(c),g.find(".message-header").text(rc.ui.MessageHeaders[c]),g.find(".message-text").text(b),$(a).closest(".rc-container-column").prepend(g),d=d||"edit","edit"===d?g.addClass("rc-requires-edit"):"view"===d?g.addClass("rc-requires-view"):"flow"===d&&g.addClass("rc-requires-flow"),g},rc.ui.getComponentMessages=function(a,b,c){if(a=a||$("body"),b&&""!=b){var d=$(a).closest(".rc-container-column").find(".component-alert .message-text:contains("+b+")");if(d.length)return d.closest(".component-alert ")}else if(c)return $(a).closest(".rc-container-column").find(".component-alert ."+c);return $(a).closest(".rc-container-column").find(".component-alert")},rc.ui.cascadeSelected=function(){$(".rc-selected").removeClass("rc-selected"),$(this).closest("html,.rc-container,.rc-component").addClass("rc-selected")},rc.ui.cascadeCss=function(){var a=$(this).attr("data-css-name"),b=$(this).attr("data-css")||"auto";$(this).closest(".rc-cascade-css-target").css(a,b)},rc.ui.cascadeDropdownText=function(){var a=$(this);if(!a.is("[disabled]")||"data-method"!=a.attr("data-cascade")||"send-payment"!=a.attr("data-value")||"flow"!=rc.getCurrentMode()){var b=a.attr("data-dropdown-text")||a.text();a.closest(".btn-group").find(".dropdown-toggle-text").text(b)}},rc.ui.flipOverflownDropdown=function(){var b=$(this),c=$(b).offset().top-$(window).scrollTop(),d=$(b).height(),e=$(window).innerHeight(),f=$(b).find(".dropdown-menu").height();return c+d+f>e?($(b).addClass("dropup"),f>c&&($(b).find(".dropdown-menu").css("height",c-20),$(b).find(".dropdown-menu").css("overflow","scroll"))):$(b).hasClass("dropup")&&$(b).removeClass("dropup"),!0},rc.ui.cascadeInput=function(){var a=$(this).attr("data-cascade")||"data-value",b=$(this).val();$(this).closest(".rc-cascade-value-target").attr(a,b)},rc.ui.cascadeInputGroup=function(){var a=$(this).attr("data-value"),b=$(this).closest(".input-group").find(".form-control");b.val(a),b.change(),rc.validate.validateField(b)},rc.ui.cascadeValue=function(){var a=$(this).closest(".rc-cascade-value-target");if(a){var b=$(this);if(!b.is("[disabled]")||"data-method"!=b.attr("data-cascade")||"send-payment"!=b.attr("data-value")||"flow"!=rc.getCurrentMode()){var c=$(this).attr("data-cascade")||"data-value",d=a.attr(c)||"",e=$(this).attr("data-value");if(a.attr(c,e),a.trigger("cascade-value-changed",{attribute:c,value:e,oldvalue:d,source:this}),1==b.hasClass("rc-cascade-toggle-label")){var f=b.text()||"",g=b.attr("data-cascade-toggle-label")||"",h=b.attr("data-cascade-toggle-value")||("true"==e?"false":""),i=b.attr("data-cascade-toggle-class")||"";b.attr("data-cascade-toggle-label",f),b.attr("data-cascade-toggle-value",e),b.attr("data-value",h),b.text(g),b.toggleClass(i)}rc.ui.togglePlaceholderForm(b,a)}}},rc.ui.cascadeValueToggle=function(){var a=$(this).attr("data-cascade")||"data-value",b=$(this).attr("data-value"),c=$(this).closest(".rc-cascade-value-target");c.attr(a)?c.attr(a,""):c.attr(a,b)},rc.ui.togglePlaceholderForm=function(a,b){if($(a).hasClass("rc-cascade-placeholder")){a=$(a)||"",b=$(b)||"";var c=$($(b).prev().find(".rc-placeholder-link"))||"";c.trigger("click");var d=$(b.find(".rc-field-name[placeholder]")),e=d.attr("placeholder")||"";if(c.next("div.popover:visible").length>0){var f=$(c.next().find(".rc-placeholder-content"))||"";f.val(e)}return!0}},rc.ui.filterDropdown=function(){var a=$(this).closest(".rc-filter-dropdown-container").find(".dropdown-menu"),b=$(this).val()||"",c=new RegExp(b||".+","i");a.find(".list-group-item").each(function(){var a=$(this),b=a.attr("data-filter-text");b&&b.match(c)?a.show():a.hide()}),0==(b||"").length?a.hide():a.show()},rc.ui.toggleActive=function(){$(this).closest(".rc-toggle-active-container").find(".rc-toggle-active").removeClass("active"),$(this).addClass("active")},rc.ui.togglePrimary=function(){var a=$(this).closest(".rc-toggle-primary-container");if($(a).find(".rc-toggle-primary").removeClass("btn-primary"),$(a).hasClass("rc-campaign-ask-frequency-list")||$(a).hasClass("rc-component-campaign-ask-item-list")){var b=$(this).closest(".rc-component-campaign-ask");b.find('[data-validate-type="otherAmount"]').change()}$(this).hasClass("btn-primary")?$(this).removeClass("btn-primary"):$(this).addClass("btn-primary")},rc.ui.toggleSiblings=function(){var a=$(this);if(!a.is("[disabled]")||"data-method"!=a.attr("data-cascade")||"send-payment"!=a.attr("data-value")||"flow"!=rc.getCurrentMode()){var b=a.closest(".rc-toggle-siblings-container");a.hasClass("rc-immediate")?(b.find(a.attr("data-hide")).hide(),b.find(a.attr("data-show")).show()):(b.find(a.attr("data-hide")).not(a.attr("data-show")).slideUp(),b.find(a.attr("data-show")).slideDown())}},rc.ui.toggleHiddenFields=function(a){return a=$(a)||"",a.find('[data-field-hidden="true"]').each(function(a,b){b=$(b)||"",b.find(".rc-component-content.rc-opacity-md").removeClass("rc-opacity-md"),b.find("[data-opacity-target='true'], .rc-field-menu").addClass("rc-opacity-md rc-requires-edit"),b.find(".rc-field-text").each(function(a,b){return b=$(b)||"",b.find(".fa-eye-slash").length>0?!0:void b.prepend('<span class="fa fa-fw fa-eye-slash pull-right rc-margin-xs rc-tooltip" data-toggle="tooltip" data-title="Hidden Field"></span>')}),!b.find("[data-opacity-target='true']").length>0&&b.addClass("rc-requires-edit rc-opacity-md")}),a.find('[data-field-hidden="false"]').each(function(a,b){b=$(b)||"",b.removeClass("rc-requires-edit rc-opacity-md"),b.find("[data-opacity-target='true'], .rc-field-menu").removeClass("rc-opacity-md rc-requires-edit"),b.find(".rc-field-text").each(function(a,b){b=$(b)||"",b.find(".fa-eye-slash").length>0&&b.find(".fa-eye-slash").remove()})}),a.find(".rc-tooltip").tooltip(),!0},rc.ui.initializePlaceholder=function(a){a=$(a)||"",$(a.find(".rc-placeholder-link")).each(function(a,b){b=$(b)||"",b.popover({html:!0,placement:"top",title:function(){return $(this).parent().find(".rc-popover-head").html()},content:function(){return $(this).parent().find(".rc-popover-content").html()}})})},rc.ui.initializePlaceholderEvents=function(a){var b=".form-group .rc-toggle-placeholder .popover .popover-content .rc-placeholder-footer .rc-placeholder-save",c=".form-group .rc-toggle-placeholder .popover .popover-content .rc-placeholder-footer .rc-placeholder-discard",d=".form-group .rc-toggle-placeholder .popover .popover-content .rc-placeholder-content";$(a.find(".rc-component-content")).on("click",b,function(a){a.preventDefault(),rc.ui.savePlaceholderValue(a)}),$(a.find(".rc-component-content")).on("click",c,function(a){a.preventDefault(),rc.ui.discardPlaceholderPopover(a)}),$(a.find(".rc-component-content")).on("keypress",d,function(a){13==a.which&&(a.preventDefault(),rc.ui.savePlaceholderValue(a)),27==a.which&&rc.ui.discardPlaceholderPopover(a)})},rc.ui.savePlaceholderValue=function(a){var b=a.target||"",c=$($(b).closest(".popover"));return c=c||"",rc.ui.setPlaceholderValue(c),!0},rc.ui.setPlaceholderValue=function(a){var b=$(a)||"",c=b.find(".rc-placeholder-content"),d=c.val()||"",e=b.closest(".rc-toggle-placeholder").next().find("[placeholder]")||"";return $(e).attr("placeholder",d),b.popover("hide"),!0},rc.ui.discardPlaceholderPopover=function(a){var b=a.target||"",c=$($(b).closest(".popover"));return c.popover("hide"),!0},rc.ui.toggleDisountCode=function(){var a=$(this),b=$(this).closest(".product-entry-row");if(1==a.hasClass("rc-toggle-discount-code")){var c=a.attr("data-value");b.attr("discount-code-hidden",c),b.find(".rc-toggle-discount-code[data-value="+c+"]").attr("disabled","disabled").addClass("rc-opacity-md");var d=b.find("false"==c?'.rc-toggle-discount-code[data-value="true"]':'.rc-toggle-discount-code[data-value="false"]');d.removeAttr("disabled").removeClass("rc-opacity-md"),"false"==c?(b.find(".discount-code").show(),b.find(".product-discount-code").show()):(b.find(".discount-code").hide(),b.find(".product-discount-code").hide())}},rc.ui.toggleDescription=function(){var a=$(this),b=$(this).closest(".product-entry-row");if(1==a.hasClass("rc-toggle-description")){var c=a.attr("data-value");b.attr("product-description-hidden",c),b.find(".rc-toggle-description[data-value="+c+"]").attr("disabled","disabled").addClass("rc-opacity-md");var d=b.find("false"==c?'.rc-toggle-description[data-value="true"]':'.rc-toggle-description[data-value="false"]');d.removeAttr("disabled").removeClass("rc-opacity-md"),"false"==c?b.find(".product-description").show():b.find(".product-description").hide()}},rc.ui.showProcessingModal=function(){rc.ui.showProcessingModal.queue.push(!0),$("#rc-modal-processing").modal("show")},rc.ui.releaseProcessingModal=function(){rc.ui.showProcessingModal.queue.pop(),0==rc.ui.showProcessingModal.queue.length&&$("#rc-modal-processing").modal("hide")},rc.ui.showProcessingModal.queue=[],rc.comp.initialize=function(a,b){b=b||{},a=$(a),rc.comp.renderDataTemplates(a),a.find("[data-field-name]").each(function(){var a=$(this).attr("data-field-name").toLowerCase();$(this).find(".rc-field-name").attr("name",a)}),a.find("[data-field-text]").each(function(){$(this).find(".rc-field-text").text($(this).attr("data-field-text"))}),a.find("[data-field-menu]").each(function(){var a=$(this).attr("data-field-menu"),b=$(a).html();menu_group=$(this).find(".rc-field-menu-group"),menu_group.append('<span class="input-group-addon rc-field-menu"></span>'),menu_group.find(".rc-field-menu").html(b),menu_group.addClass("input-group")}),a.find("[data-placeholder]").each(function(){$(this).find(".rc-field-name").attr("placeholder",$(this).attr("data-placeholder"))}),a.find('[data-field-hidden="true"]').each(function(){$(this).addClass("rc-requires-edit rc-opacity-md"),$(this).find(".rc-field-text").prepend('<span class="fa fa-fw fa-eye-slash pull-right rc-margin-xs rc-tooltip" data-toggle="tooltip" data-title="Hidden Field"></span>')}),a.find('[data-required="true"]').each(function(){$(this).find(".input-group").attr("data-required","true")}),a.find('[data-local-only="true"]').each(function(){var a=$(this).attr("data-field-name").toLowerCase();$(this).find(".rc-field-name").removeAttr("name"),$(this).find(".rc-field-name").attr("data-name",a)}),a.find(".rc-cascade-selected").on("click",rc.ui.cascadeSelected),a.find(".rc-cascade-dropdown-text").on("click",rc.ui.cascadeDropdownText),a.find(".rc-cascade-css").on("click",rc.ui.cascadeCss),a.find(".rc-cascade-input").on("keyup",rc.ui.cascadeInput),a.find(".rc-cascade-input").on("change",rc.ui.cascadeInput),a.find(".rc-cascade-input-group").on("click",rc.ui.cascadeInputGroup),a.find(".rc-cascade-value").on("click",rc.ui.cascadeValue),a.find(".rc-cascade-value-toggle").on("click",rc.ui.cascadeValueToggle),a.find(".rc-filter-dropdown").on("keyup",rc.ui.filterDropdown),a.find(".rc-toggle-active").on("click",rc.ui.toggleActive),a.find(".rc-toggle-primary").on("click",rc.ui.togglePrimary),a.find(".rc-toggle-siblings").on("click",rc.ui.toggleSiblings),a.find(".rc-tooltip").tooltip(),a.find(".rc-field-name").on("change",rc.ui.setDefaultValue),a.find(".rc-field-name").on("keyup",rc.ui.setDefaultValue),rc.isPaymentTransactional&&$('div[data-template="#rc-component-workflow-action--send-payment"]').find('.rc-payment[data-value="corduro"]').attr("disabled","disabled"),rc.isSageConfigured&&$('div[data-template="#rc-component-workflow-action--send-payment"]').find('.rc-payment[data-value="sage"]').removeAttr("disabled"),rc.isHeartlandConfigured&&$('div[data-template="#rc-component-workflow-action--send-payment"]').find('.rc-payment[data-value="heartland"]').removeAttr("disabled"),rc.isIATSConfigured&&$('div[data-template="#rc-component-workflow-action--send-payment"]').find('.rc-payment[data-value="iATS"]').removeAttr("disabled"),rc.isPayPalConfigured&&$('div[data-template="#rc-component-workflow-action--send-payment"]').find('.rc-payment[data-value="PayPal"]').removeAttr("disabled"),rc.isLitleConfigured&&($('div[data-template="#rc-component-workflow-action--send-payment"]').find('.rc-payment[data-value="Litle"]').removeAttr("disabled"),rc.isLitleConfiguredForAdvancedFraudDetection&&$('div[data-template="#rc-component-workflow-action--send-payment"]').find('[data-name="Litle"] [data-cascade="data-advanced-fraud-detection"]').removeAttr("disabled")),rc.isAuthDotNetConfigured&&$('div[data-template="#rc-component-workflow-action--send-payment"]').find('.rc-payment[data-value="Authorize.net"]').removeAttr("disabled"),rc.isCybersourceConfigured&&$('div[data-template="#rc-component-workflow-action--send-payment"]').find('.rc-payment[data-value="Cybersource"]').removeAttr("disabled");var c="edit"==$("#rc-page-container").attr("data-mode");a.find("[contenteditable]").attr("contenteditable",c),a.attr("id",b.guid),a.find(".input-group[data-required] .rc-marker").off("click").click(function(){if("edit"==rc.getCurrentMode()){var a=$(this).closest(".input-group"),b="true"!=a.attr("data-required");a.attr("data-required",b)}}),a.find(".dropdown").on("show.bs.dropdown",rc.ui.flipOverflownDropdown),a.find(".form-control").on("change",rc.upsertData.validate)},rc.comp.renderDataTemplates=function(a){return a.find("[data-template]").each(function(){var a=$(this).attr("data-template"),b=$(a).html(),c=$(b);c=rc.comp.renderDataTemplates(c),$(this).prepend(c)}),a},rc.comp.populatePicklistValue=function(a,b){if(null==rc.picklistValsByFieldName)return a;var c=rc.picklistValsByFieldName[b]||[];a.html(""),$(c).each(function(){a.append($("<option>",{value:this}).text(this))})},rc.comp.remoting.send=function(a,b,c,d){return b.__campaign=b.__campaign||rc.campaignId,b.__mode=b.__mode||rc.getParam("mode"),b.__form=b.__form||rc.getParam("form")||rc.paramFormId||null,b.__data=b.__data||rc.getParam("data")||rc.paramData||null,a=a||new jQuery.Deferred,c=c||function(){},d=d||function(){},a.done(function(b,d,e){return c(a,b,d,e)}),a.fail(function(b,c,e){d(a,b,c,e)}),a.always(function(){rc.ui.markProcessingDone()}),rc.remoting.invokeAction(b.__action,b,function(c,d){b=b||{},c=c||{},d=d||{},d.status?a.resolve(b,c,d):a.reject(b,c,d)}),rc.ui.markProcessing(),a.promise()},rc.comp.insert=function(a,b){var c=$(a).clone();return c.removeAttr("id"),c.removeClass("rc-template"),c.show(),rc.comp.initialize(c),$(b).append(c),c},rc.comp.importContentCSS=function(a,b){b=b||{};var a=$(a);a&&a.length>0&&a.get(0)&&$(a.get(0).attributes).each(function(b,c){c.name.match("css-")&&a.removeAttr(c.name)});for(var c in b)a.attr("css-"+c,b[c])},rc.comp.insertWorkflow=function(a,b){b=b||{},b.actions=b.actions||[],b.data=b.data||{},b.data.guid=b.data.guid||rc.guid();var c=rc.comp.insert("#rc-container-workflow",a,b.data);return c.find(".rc-workflow-name").val(b.data.name),c.find(".rc-workflow-active").prop("checked","true"==b.data.active),c.attr("id",b.data.guid),c.find('[data-action="insert"]').on("click",function(){var a={context:"then"};rc.comp.insertWorkflowAction(c.find(".rc-container-workflow-content"),a)}),$(b.actions).each(function(a,b){rc.comp.insertWorkflowAction(c.find(".rc-container-workflow-content"),b)}),0==b.actions.length&&rc.comp.insertWorkflowAction(c.find(".rc-container-workflow-content"),{guid:rc.guid()}),c.find(".rc-container-workflow-content").sortable({handle:".rc-container-handle",opacity:.5,placeholder:"rc-state-highlight well",revert:!0}),c.find(".dropdown").on("show.bs.dropdown",rc.ui.flipOverflownDropdown),c},rc.comp.insertWorkflowAction=function(a,b){b=b||{},b.context=b.context||"then",b.data=b.data||{},b.data.guid=b.data.guid||rc.guid(),"javascript"==b.method&&(b.data.data=rc.html_decode(b.data.data));var c=rc.comp.insert("#rc-component-workflow-action",a,b.data);c.attr("id",b.data.guid),c.on("cascade-value-changed",rc.comp.validateWorkflowAction),"send-payment"!=b.method&&rc.wf.hasPaymentProcessor()&&c.find('.dropdown-menu a[data-value="send-payment"]').attr("disabled","disabled");var d=c.find(".rc-component-workflow-action-content");d.find('.label[data-value="'+b.context+'"]').click(),d.find('[data-cascade="data-method"][data-value="'+b.method+'"]').click();var e=d.find('.rc-fg[data-method="'+b.method+'"]');if(rc.comp.CopyParameterAction.refreshMergeFieldPicklist(a),"send-mail"==b.method)e.find('[data-cascade="data-mail-to"]').val(b.data["mail-to"]),e.find('[data-cascade="data-mail-reply-to"]').val(b.data["mail-reply-to"]),e.find('[data-cascade="data-mail-subject"]').val(b.data["mail-subject"]),e.find('[data-cascade="data-mail-body"]').val(b.data["mail-body"]),e.find("[data-cascade]").change(),rc.comp.registerMergeFieldAutoComplete(e.find('[data-cascade="data-mail-to"]'),rc.getKeys(rc.ui.MergeFieldMap));else if("send-payment"==b.method&&"corduro"==b.data.data)e.find('[data-value="'+b.data.data+'"].btn').click(),e.find('[data-cascade="data-auth-token"]').val(b.data["auth-token"]),e.find('[data-cascade="data-auth-only"][data-value="'+b.data["auth-only"]+'"]').click(),e.find('[data-cascade="data-test-only"][data-value="'+b.data["test-only"]+'"]').click(),e.find("[data-cascade]").change();else if("send-payment"==b.method&&"sage"==b.data.data)rc.isSageConfigured&&(e.find('[data-value="'+b.data.data+'"].btn').click(),e.find("[data-cascade]").change());else if("send-payment"==b.method&&"heartland"==b.data.data)rc.isHeartlandConfigured&&(e.find('[data-value="'+b.data.data+'"].btn').click(),e.find("[data-cascade]").change());else if("send-payment"==b.method&&"iATS"==b.data.data)rc.isIATSConfigured&&(e.find('[data-value="'+b.data.data+'"].btn').click(),e.find("[data-cascade]").change());else if("send-payment"==b.method&&"PayPal"==b.data.data)rc.isPayPalConfigured&&(e.find('[data-value="'+b.data.data+'"].btn').click(),e.find("[data-cascade]").change());else if("send-payment"==b.method&&"Litle"==b.data.data){if(rc.isLitleConfigured&&(e.find('[data-value="'+b.data.data+'"].btn').click(),e.find("[data-cascade]").change(),rc.isLitleConfiguredForAdvancedFraudDetection)){var f=b.data["advanced-fraud-detection"];void 0==f?e.find('[data-cascade="data-advanced-fraud-detection"][data-value="false"]').click():e.find('[data-cascade="data-advanced-fraud-detection"][data-value="'+f+'"]').click();var g="view"==rc.getCurrentMode();if(f){var h=b.data["advanced-fraud-detection-test-mode"];void 0==h?e.find('[data-cascade="data-advanced-fraud-detection-test-mode"][data-value="false"]').click():e.find('[data-cascade="data-advanced-fraud-detection-test-mode"][data-value="'+h+'"]').click(),"true"==h&&e.find('[data-cascade="data-sessionId"]').val(b.data.sessionId).change()}rc.initializeSessionId(b.data["advanced-fraud-detection-test-mode"],b.data.sessionId),g&&f&&rc.comp.insertLitleProfilingTag()}}else"send-payment"==b.method&&"Authorize.net"==b.data.data?rc.isAuthDotNetConfigured&&(e.find('[data-value="'+b.data.data+'"].btn').click(),e.find("[data-cascade]").change()):"send-payment"==b.method&&"Cybersource"==b.data.data?rc.isCybersourceConfigured&&(e.find('[data-value="'+b.data.data+'"].btn').click(),e.find("[data-cascade]").change()):"copy-param"==b.method?(e.find(".form-control").val(b.data.parameter).change(),e.find(".dropdown-menu").attr("data-original-target",b.data.data)):rc.isEditMode||"load-page"!=b.method?"send-data"==b.method?((null==b.data["exclude-giving"]||void 0===b.data["exclude-giving"])&&(b.data["exclude-giving"]=!1,e.find('[data-cascade="exclude-giving"]').attr("is-old","true")),(null==b.data["exclude-events"]||void 0===b.data["exclude-events"])&&(b.data["exclude-events"]=!0),e.find('[data-cascade="exclude-giving"][data-value="'+b.data["exclude-giving"]+'"].btn').click(),e.find('[data-cascade="exclude-events"][data-value="'+b.data["exclude-events"]+'"].btn').click()):(e.find(".form-control").val(b.data.data),e.find(".form-control").val(b.data.data).change(),e.find('a[data-value="'+b.data.data+'"]').click()):$("#"+b.data.guid).attr("data-value",b.data.data);
rc.isPaymentTransactional&&d.find('.rc-payment[data-value="corduro"]').attr("disabled","disabled"),rc.isSageConfigured&&d.find('.rc-payment[data-value="sage"]').removeAttr("disabled"),rc.isHeartlandConfigured&&d.find('.rc-payment[data-value="heartland"]').removeAttr("disabled"),rc.isIATSConfigured&&d.find('.rc-payment[data-value="iATS"]').removeAttr("disabled"),rc.isPayPalConfigured&&d.find('.rc-payment[data-value="PayPal"]').removeAttr("disabled"),rc.isLitleConfigured&&(d.find('.rc-payment[data-value="Litle"]').removeAttr("disabled"),rc.isLitleConfiguredForAdvancedFraudDetection&&$('div[data-template="#rc-component-workflow-action--send-payment"]').find('[data-name="Litle"] [data-cascade="data-advanced-fraud-detection"]').removeAttr("disabled")),rc.isAuthDotNetConfigured&&d.find('.rc-payment[data-value="Authorize.net"]').removeAttr("disabled"),rc.isCybersourceConfigured&&d.find('.rc-payment[data-value="Cybersource"]').removeAttr("disabled")},rc.comp.validateWorkflowAction=function(a,b){"data-method"==b.attribute&&("send-payment"==b.value?$('#rc-workflows-list .dropdown-menu a[data-value="send-payment"]').not($(b.source)).attr("disabled","disabled"):"send-payment"==b.oldvalue&&$('#rc-workflows-list .dropdown-menu a[data-value="send-payment"]').removeAttr("disabled")),"data-value"==b.attribute&&"send-payment"==$(this).attr("data-method")&&rc.comp.validateCampaignAskSection()},rc.comp.insertColumnList=function(a,b){b=b||{},b.data=b.data||{},b.data.columns=parseInt(b.data.columns||"1"),b.data.guid=b.data.guid||rc.guid();var c=rc.comp.insert("#rc-container-column-list",a,b.data),d=c.find(".rc-container-column-list-content");return c.attr("id",b.data.guid),c.attr("data-columns",b.data.columns),rc.comp.importContentCSS(c,b.styles),rc.comp.updateContentCSS(c),rc.comp.deleteColumnListColumns(d,b.data.columns),rc.comp.upsertColumnListColumns(d,b.data.columns,b.columns),rc.comp.upsertColumnListComponents(d,b.columns),$("#rc-container-list-messages").hide(),c},rc.comp.deleteColumnListColumns=function(a,b){$(a).find(".rc-container-column").each(function(){var a=parseInt($(this).attr("data-position")||"999");b<a&&$(this).remove()})},rc.comp.upsertColumnListColumns=function(a,b,c){c=c||[],$(new Array(b)).each(function(d){var e='.rc-container-column[data-position="'+d+'"]',f=a.find(e),g=c[d]||{};g.data=g.data||{},0==f.length&&(f=rc.comp.insert("#rc-container-column",a,g.data),a.append(f),f.find(".rc-container-column-content").sortable({connectWith:".rc-container-column-content",handle:".rc-component-handle",opacity:.5,placeholder:"rc-state-highlight well",revert:!0})),f.attr("data-position",d),f.attr("data-size",parseInt(g.data.size)||12/b),f.removeClass("col-sm-1 col-sm-2 col-sm-3 col-sm-4 col-sm-5 col-sm-6 col-sm-7 col-sm-8 col-sm-9 col-sm-10 col-sm-11 col-sm-12"),f.removeClass("col-md-1 col-md-2 col-md-3 col-md-4 col-md-5 col-md-6 col-md-7 col-md-8 col-md-9 col-md-10 col-md-11 col-md-12"),f.removeClass("col-lg-1 col-lg-2 col-lg-3 col-lg-4 col-lg-5 col-lg-6 col-lg-7 col-lg-8 col-lg-9 col-lg-10 col-lg-11 col-lg-12"),f.addClass("col-sm-"+f.attr("data-size"))})},rc.comp.upsertColumnListComponents=function(a,b){$(b).each(function(b,c){c.components=rc.filterComponentData(c.components);var c=c||{},d='.rc-container-column[data-position="'+b+'"]',e=a.find(d),f=e.find(".rc-container-column-content");$(c.components).each(function(a,b){rc.comp.upsertComponent(f,b)})})},rc.comp.upsertComponent=function(a,b){var c=b||{};c.data=c.data||{},c.data.guid=c.data.guid||rc.guid(),c.data.customHidden=c.data.customHidden||!1,c.type=c.type||"",c.styles=c.styles||{},c.defaultValues=c.defaultValues||{},c.placeholderValues=c.placeholderValues||{};var d={};d.address=rc.comp.Address,d["advanced-css"]=rc.comp.AdvancedCSS,d.button=rc.comp.Button,d["campaign-ask"]=rc.comp.CampaignAsk,d["campaign-product"]=rc.comp.CampaignProduct,d["campaign-progress"]=rc.comp.CampaignProgress,d["credit-card"]=rc.comp.CreditCard,d["internal-javascript"]=rc.comp.InternalJavascript,d["external-javascript"]=rc.comp.ExternalJavascript,d["external-stylesheet"]=rc.comp.ExternalStylesheet,d["html-block"]=rc.comp.HtmlBlock,d.image=rc.comp.Image,d.jumbotron=rc.comp.Jumbotron,d["merge-field"]=rc.comp.MergeField,d["simple-header"]=rc.comp.SimpleHeader,d["simple-text"]=rc.comp.SimpleText,d["url-link"]=rc.comp.URLLink,d.cart=rc.comp.Cart,d.session=rc.comp.Session,d.attribute=rc.comp.Attribute;var e=d[c.type]||function(){},f=new e(a,c.data);rc.ui.initializePlaceholder(f.component),rc.ui.initializePlaceholderEvents(f.component),rc.applyPlaceholderAttributeValues(f.component,c.placeholderValues),rc.applyDefaultAttributeDefaultValues(f.component,c.defaultValues),rc.setHiddenFieldAttribute(f.component,c.data.customHidden),rc.comp.importContentCSS(f.component,c.styles),rc.comp.updateContentCSS(f.component),"merge-field"==c.type&&$("#rc-workflows-list").find('[data-template="#rc-component-workflow-action--copy-param"]').each(function(){var a=$('<li><a class="rc-cursor-pointer rc-cascade-dropdown-text rc-cascade-value" data-value=""></a></li>');a.find(".rc-cascade-value").on("click",rc.ui.cascadeValue),a.find(".rc-cascade-value").attr("data-value",c.data.name),a.find(".rc-cascade-value").text(c.data.text),a.find(".rc-cascade-dropdown-text").on("click",rc.ui.cascadeDropdownText),$(this).find('[data-dropdown-menu="target-fields"]').append(a)}),rc.validate.initializeComponentData(a,c),f.send&&f.send()},rc.comp.updateContentCSS=function(a){var a=$(a),b=a.find(".rc-content-css").filter(":first");b.attr("style",""),a&&a.get(0)&&$(a.get(0).attributes).each(function(c,d){if(d.name.match("css-")&&"css-background-image"!=d.name){var e=d.name.replace("css-","");d.value=d.value||"",b.css(e,d.value)}if(d.name.match("css-")&&"css-background-image"==d.name&&d.value&&(b.css("background-image","url("+d.value+")"),b.css("background-size","cover"),b.css("background-position","center center")),d.name.match("css-")&&"css-background-image"==d.name&&!d.value&&(b.css("background-image",""),b.css("background-size",""),b.css("background-position","")),"horizontal"===a.attr("css-orientation")&&"css-text-decoration"===d.name){var e=d.name.replace("css-","");b.find(".rc-label-container").css(e,d.value)}}),rc.ui.toggleHiddenFields(a),rc.ui.removeRedundantOpacity()},rc.comp.MergeField=function(a,b){if(this.container=a,this.type="MergeField",this.data=b,"PICKLIST"==b.type){this.component=rc.comp.insert("#rc-component-merge-field-picklist",this.container,this.data);var c=this.component.find(".rc-field-name");c.attr("data-field-name",b.name),rc.comp.populatePicklistValue(c,b.name)}else if("MULTIPICKLIST"==b.type){this.component=rc.comp.insert("#rc-component-merge-field-picklist",this.container,this.data);var c=this.component.find(".rc-field-name");c.attr("data-field-name",b.name),c.prop("multiple",!0),rc.comp.populatePicklistValue(c,b.name)}else this.component="BOOLEAN"==b.type?rc.comp.insert("#rc-component-merge-field-checkbox",this.container,this.data):rc.comp.insert("#rc-component-merge-field",this.container,this.data);this.headers=this.component.find(".rc-component-headers"),this.content=this.component.find(".rc-component-content"),this.component.find(".rc-field-text").text(b.text),this.component.find(".rc-field-name").attr("name",b.name),this.component.find(".rc-field-name").val(b.placeholder),this.component.find(".rc-field-menu").remove(),this.component.attr("data-hidden",b.hidden?"true":"false"),this.component.attr("data-type",b.type),this.component.find(".input-group").attr("data-required",b.required)},rc.comp.Address=function(a,b){this.container=a,this.type="Address",this.data=b,this.component=rc.comp.insert("#rc-component-address",this.container,this.data),this.headers=this.component.find(".rc-component-headers"),this.content=this.component.find(".rc-component-content");for(var c in this.data)if(c.match("req-")){var d=c.replace("req-","");$(this.component).find("[data-field-name='"+d+"'] [data-required]").filter(":first").attr("data-required",this.data[c])}this.component.find('[name="'+rc.ns+'address_state__c"]').change(rc.comp.Address.populateCountryBasedOnState)},rc.comp.Address.populateCountryBasedOnState=function(){var b=$(this).closest("div.rc-component-address-content").find('[name="'+rc.ns+'address_country__c"]');if(b.length){var c=$.trim($(this).val());if(!c)return void b.val("");var d=$(this).closest("div.rc-field-menu-group").find(".dropdown-menu a[data-value='"+c+"']").length;b.val(d>0?"US":"")}},rc.comp.CampaignAsk=function(a,b){this.container=a,this.type="CampaignAsk",this.data=b||{},this.data.data=this.data.data||{},this.component=rc.comp.insert("#rc-component-campaign-ask",this.container,this.data),this.headers=this.component.find(".rc-component-headers"),this.content=this.component.find(".rc-component-content"),this.component.find(".text-1").text(b["text-1"]),this.component.find(".text-2").text(b["text-2"]);var c=$("#rc-component-campaign-ask-item").html(),d=$(".rc-component-campaign-ask-item-list"),e=d.closest(".rc-component-campaign-ask > .rc-component-campaign-ask-content"),f=[],g=$("#rc-component-campaign-ask-freq-item").html(),h=e.find(".rc-toggle-primary-container.rc-campaign-ask-frequency-list"),i=[],j=$("#rc-component-campaign-ask-other-item").html(),k=e.find(".rc-component-campaign-ask-other");d.empty();var l=function(){$(".rc-component-campaign-ask-other").show()},m=function(){$(".rc-component-campaign-ask-other").hide(),$(".rc-component-campaign-ask-other input").val(""),$(".rc-component-campaign-ask-other .rc-error-label").remove()};$(rc.campaignAskRecords).each(function(){var a=rc.cleanKeysToLower(this),b=a[rc.ns+"giving_frequency__c"]||"",h=a[rc.ns+"giving_type__c"]||"",k=$(g);if(k.removeAttr("id"),k.attr("data-show",".rc-amount[data-giving-frequency='"+b+"']"),k.attr("data-hide",".rc-amount[data-giving-frequency]"),k.attr("data-value",b),k.text(b),k.on("click",m),e.find(".note[data-giving-frequency='"+b+"']").show(),f.length||k.removeClass("rc-margin-xs"),f.push(k),a[rc.ns+"ask_1_amount__c"]){var n=$(c);n.removeAttr("id"),n.attr("data-giving-frequency",b),n.attr("data-giving-type",h),n.attr("data-value",a[rc.ns+"ask_1_amount__c"]),n.text("$"+a[rc.ns+"ask_1_amount__c"]),n.addClass("rc-editSelection"),n.on("click",m),d.append(n)}if(a[rc.ns+"ask_2_amount__c"]){var n=$(c);n.removeAttr("id"),n.attr("data-giving-frequency",b),n.attr("data-giving-type",h),n.attr("data-value",a[rc.ns+"ask_2_amount__c"]),n.text("$"+a[rc.ns+"ask_2_amount__c"]),n.addClass("rc-editSelection"),n.on("click",m),d.append(n)}if(a[rc.ns+"ask_3_amount__c"]){var n=$(c);n.removeAttr("id"),n.attr("data-giving-frequency",b),n.attr("data-giving-type",h),n.attr("data-value",a[rc.ns+"ask_3_amount__c"]),n.text("$"+a[rc.ns+"ask_3_amount__c"]),n.addClass("rc-editSelection"),n.on("click",m),d.append(n)}if(a[rc.ns+"ask_4_amount__c"]){var n=$(c);n.removeAttr("id"),n.attr("data-giving-frequency",b),n.attr("data-giving-type",h),n.attr("data-value",a[rc.ns+"ask_4_amount__c"]),n.text("$"+a[rc.ns+"ask_4_amount__c"]),n.addClass("rc-editSelection"),n.on("click",m),d.append(n)}if(a[rc.ns+"ask_5_amount__c"]){var n=$(c);n.removeAttr("id"),n.attr("data-giving-frequency",b),n.attr("data-giving-type",h),n.attr("data-value",a[rc.ns+"ask_5_amount__c"]),n.text("$"+a[rc.ns+"ask_5_amount__c"]),n.addClass("rc-editSelection"),n.on("click",m),d.append(n)}if(a[rc.ns+"ask_other__c"]){var n=$(c);n.removeAttr("id"),n.attr("data-giving-frequency",b),n.attr("data-giving-type",h),n.text("Other.."),n.addClass("rc-editSelection"),n.on("click",l),d.append(n);var o=$(j);o.attr("data-giving-frequency",b),o.attr("data-giving-type",h),i.push(o)}rc.comp.CampaignAsk.setFrequencyAmountMinThreshold(a[rc.ns+"giving_frequency__c"],a[rc.ns+"minimum_amount_threshold__c"])}),h.empty(),k.empty(),f&&f.length>0&&f[0].removeClass(""),h.append(f),k.append(i),0==rc.campaignAskRecords.length&&d.append('<div class="alert alert-warning">No ask values configured!</div>'),rc.comp.initialize(e),$(".rc-campaign-ask-frequency-list .btn").filter(":first").click(),rc.comp.validateCampaignAskSection(),this.component.find(".input-group").attr("data-required",b.required)},rc.comp.CampaignAsk.frequencyAmountMinThreshold={},rc.comp.CampaignAsk.setFrequencyAmountMinThreshold=function(a,b){rc.comp.CampaignAsk.frequencyAmountMinThreshold[a]=b},rc.comp.CampaignAsk.getAskValueFromMergeFields=function(a){a.finalAmount=0;var b=void 0!=$(".rc-component-merge-field-content").find('[name="'+rc.ns+'giving_giving_frequency__c"]').val()?!0:!1,c=void 0!=$(".rc-component-merge-field-content").find('[name="'+rc.ns+'giving_giving_amount__c"]').val()?!0:!1;if(1==b&&0==c||0==b&&1==c)return null;var d=b&&c?!0:!1;return 1==d?(a.finalAmount=$(".rc-component-merge-field-content").find('[name="'+rc.ns+'giving_giving_amount__c"]').val()||"0.0",a.frequency=$(".rc-component-merge-field-content").find('[name="'+rc.ns+'giving_giving_frequency__c"]').val()||"",a):null},rc.comp.CampaignAsk.getAskValue=function(){var a=rc.comp.CampaignAsk.getComponentAskValue();return null!=a&&a||!rc.dataModal.BatchUploadModel||(a={},a.frequency=rc.dataModal.BatchUploadModel[rc.ns+"giving_giving_frequency__c"],a.finalAmount=rc.dataModal.BatchUploadModel[rc.ns+"giving_giving_amount__c"]),a.frequency&&""!=a.frequency&&a.finalAmount&&""!=a.finalAmount?a:null},rc.comp.CampaignAsk.getComponentAskValue=function(){var a={};a.finalAmount=0;var b=$("#rc-container-list .rc-campaign-ask-frequency-list");if(!b||0==b.length)return a=rc.comp.CampaignAsk.getAskValueFromMergeFields(a);if(b){var c=b.find(".btn-primary").attr("data-value");a.frequency=c;var d=$(".rc-component-campaign-ask-item-list"),e=0;if(d){var f=d.find('[data-giving-frequency="'+c+'"]').parent().find('[data-giving-frequency="'+c+'"].btn-primary').attr("data-value");if(f)e=f;else{var g=d.find('[data-giving-frequency="'+c+'"]').parent().find('[data-giving-frequency="'+c+'"].btn-primary');if(g.length){var h=$(".rc-component-campaign-ask-other").find('[data-giving-frequency="'+c+'"].input-group').find(".form-control").val();h&&(e=h)}}a.finalAmount=e}}return a},rc.comp.CampaignAsk.validateAskValue=function(){var a=rc.comp.CampaignAsk.getAskValue(),b=$("#rc-container-list .rc-component-campaign-ask"),c=$("#rc-container-list .rc-component-campaign-ask .message-header"),d="Donation amount is not selected. Please select and resubmit.",e=$("#rc-container-list .rc-component-campaign-ask").find(".input-group").attr("data-required");if(0==b.length)return!0;if("true"==e&&(null==a||0==a.finalAmount))return c.text(rc.ui.MessageHeaders[rc.ui.ERROR]+" "),b.find(".ask-validation-error").show(),rc.ui.showMessagePopup(rc.ui.ERROR,d),!1;c.text(""),b.find(".ask-validation-error").hide();var f=$(b).find(".component-alert .message-text:contains("+d+")");return f.length&&f.closest(".component-alert ").remove(),!0},rc.comp.CampaignAsk.populateData=function(a){var b=a[rc.ns+"giving_giving_frequency__c"],c=a[rc.ns+"giving_giving_amount__c"];c=parseFloat(c,10);var d=$("#rc-container-list .rc-campaign-ask-frequency-list");if(d.length&&b){d.find("[data-value='"+b+"']").click();var e=$(".rc-component-campaign-ask-item-list");e.find('[data-giving-frequency="'+b+'"][data-value="'+c+'"]').click()}},rc.comp.Attribute=function(a,b){this.container=a,this.type="attribute",this.data=b,this.component=rc.comp.insert("#rc-component-cm-attribute",this.container,this.data),this.headers=this.component.find(".rc-component-headers"),this.content=this.component.find(".rc-component-content"),this.send=rc.comp.Attribute.send,this.done=rc.comp.Attribute.done,this.render=rc.comp.Attribute.render},rc.comp.Attribute.send=function(a,b){return a=a||new jQuery.Deferred,b=b||{},b.__action=rc.actions.selectCampaignMemberAttributeList,rc.comp.remoting.send(a,b,$.proxy(this.done,this),this.fail),a.promise()},rc.comp.Attribute.done=function(a,b,c){for(var g,e=this.data,f=$("<option/>",{value:"",text:"Select Attribute",selected:!0}),h=[f],i=0;i<c.campaignMemberAttributeList.length;++i){g=c.campaignMemberAttributeList[i];var j=$("<option/>",{value:g.Id,text:g.type});$.data(j[0],"data",g),h.push(j)}this.component.find(".attribute-select").html("").append(h).val("").change($.proxy(this.render,this)),this.component.find(".attribute-select").val(e.attribute_id),this.component.find(".attribute-select").trigger("change")},rc.comp.Attribute.render=function(){var b=this.data;this.component.find(".rc-label-container label").text(""),this.component.find(".rc-value-container").html("");var c=this.component.find(".attribute-select").find(":selected");if(!c||0==c.length||""==c.attr("value"))return!0;var d=$.data(c[0],"data");if(!d)return!0;this.data.productSlot&&rc.occupyProductSlot(this.data.productSlot);var e=this.data.productSlot||rc.getProductSlot();if(this.data.productSlot=e,!e)return rc.ui.showMessagePopup(rc.ui.ERROR,"Maximum allowed attributes added !"),!0;if(this.component.find(".rc-label-container label").text(rc.html_decode(d.type)),d.attributeDataType&&"picklist"==d.attributeDataType.toLowerCase()){var f=$("#rc-component-merge-field-picklist .rc-value-container").html();this.component.find(".rc-value-container").html(f);for(var g=this.component.find(".rc-field-name"),h=[],i=0;i<d.options.length;++i){var j=$("<option />",{value:$.trim(rc.html_decode(d.options[i])),text:$.trim(rc.html_decode(d.options[i]))});h.push(j)}var k=$("<option/>",{value:"",text:"Select Value"});g.append(h).prepend(k)}else if(d.attributeDataType&&"checkbox"==d.attributeDataType.toLowerCase()){var l=$("#rc-component-merge-field-checkbox .rc-value-container").html();this.component.find(".rc-value-container").html(l)}else if(d.attributeDataType&&"date"==d.attributeDataType.toLowerCase()){var l=$("#rc-component-cm-attribute .rc-value-container").html();this.component.find(".rc-value-container").html(l),this.component.find("input.form-control").datepicker({orientation:"bottom"})}else{var l=$("#rc-component-cm-attribute .rc-value-container").html();this.component.find(".rc-value-container").html(l)}return this.component.find(".form-control").attr("name",e),this.component.find(".input-group").attr("data-required",b.required),rc.comp.initialize(this.component.find(".rc-value-stub-container")),!0},rc.comp.Attribute.populateUpsertData=function(a){var b=$(".rc-component-cm-attribute .rc-value-container .rc-field-name");return $(b).each(function(b,c){c=$(c);var d=c.attr("name");if(!d)return!0;var e=rc.prodMap[d],f=c.closest(".rc-component-cm-attribute").find(".attribute-select").val(),g="";g="checkbox"==c.attr("type")?""+c.is(":checked"):c.val();var h="Attribute";a[d]=f+":"+g,a[e+"_type__c"]=h}),a},rc.comp.Attribute.renderUpsertData=function(a){for(var b=rc.getKeys(rc.prodMap),c=0;c<b.length;++c){var d=b[c],e=rc.prodMap[d],f=a[d];if(f&&"Attribute"==a[e+"_type__c"]){var g=f.split(":");f=g[0];for(var h=g[1]||"",i=2;i<g.length;++i)g[i]&&(h=h+":"+g[i]);h=rc.html_decode(h);var j=$(".rc-component-cm-attribute-content .attribute-select").find("option[value='"+f+"']:selected");if(!j||0==j.length)continue;var k=j.closest(".rc-component-cm-attribute");"checkbox"==k.find(".rc-field-name").attr("type")?"true"==h?k.find(".rc-field-name").prop("checked",!0):k.find(".rc-field-name").prop("checked",!1):(k.find(".rc-field-name").val(h).attr("name",d),k.find("select.rc-field-name option[value='"+h+"']").attr("selected","selected"))}}},rc.comp.Cart=function(a,b){this.container=a,this.type="cart",this.data=b,this.component=rc.comp.insert("#rc-component-cart",this.container,this.data),this.headers=this.component.find(".rc-component-headers"),this.content=this.component.find(".rc-component-content"),b.header=b.header||"Shopping Cart",this.component.find(".cart-header-text").text(b.header),this.send=rc.comp.Cart.send,this.done=rc.comp.Cart.done,this.getOptionGroup=rc.comp.Cart.getOptionGroup,this.appendProductRow=rc.comp.Cart.appendProductRow,this.recalculateTotal=rc.comp.Cart.recalculateTotal,this.refreshEmptyCartMessage=rc.comp.Cart.refreshEmptyCartMessage,this.isValidPurchaseQuantity=rc.comp.Cart.isValidPurchaseQuantity,this.calculateProductDiscountCode=rc.comp.Cart.calculateProductDiscountCode,this.initialize=rc.comp.Cart.initialize,this.idProductMap={},$(this.component).on("recalculate-sum",$.proxy(this.recalculateTotal,this)),this.component.find(".input-group").attr("data-required",b.required)},rc.comp.Cart.getPaymentDetails=function(){var a=rc.comp.Cart.getComponentPaymentDetails();return null!=a&&a||(a={},a.frequency="One Payment",a.finalAmount=rc.dataModal.BatchUploadModel[rc.ns+"event_purchase_giving_amount__c"]),a.finalAmount&&""!=a.finalAmount?a:null},rc.comp.Cart.getComponentPaymentDetails=function(){if(0==$("#rc-container-list .rc-component-cart .products-total-amount").length)return null;var a={};a.finalAmount=0;var b=0;return $("#rc-container-list .rc-component-cart .products-total-amount").each(function(a,c){var d=parseFloat($(c).attr("total-sum"));d&&(b+=d)}),a.finalAmount=b,a.frequency="One Payment",a},rc.comp.Cart.validate=function(){var a=!1,b="Product quantity is not selected. Please select and resubmit.",c=$("#rc-container-list .rc-component-cart .rc-component-cart-content .cart-validation-error .message-header");return $("#rc-container-list .rc-component-cart").find('.input-group[data-required="true"]').closest(".rc-component-cart").each(function(d,e){var f=0;if($(e).find(".product-quantity").each(function(a,b){var c=parseInt($(b).attr("aria-valuenow"));c&&(f+=c)}),0==parseInt(f,10)){a=!0,$("#rc-container-list .rc-component-cart .product-quantity").closest(".form-group").toggleClass("has-error",0==g);var g=1==a?!1:!0,h=$(e);c.text(rc.ui.MessageHeaders[rc.ui.ERROR]+" "),h.find(".cart-validation-error").show()}else{$("#rc-container-list .rc-component-cart .product-quantity").closest(".form-group").toggleClass("has-error",!1);var h=$(e);c.text("");var i=$(h).find(".component-alert .message-text:contains("+b+")");i.length&&i.closest(".component-alert ").remove()}}),1==a?(rc.ui.showMessagePopup(rc.ui.ERROR,b),!1):!0},rc.comp.Cart.recalculateTotal=function(){{var b=0;$(this.component)}this.component.find(".product-entry-row").each(function(a,c){var d=$.data(c,"product"),e=d.purchasePrice,f=$(c).find("input.product-quantity").val(),g=parseInt(f,10)?parseInt(f,10):0,h=$(c).find(".product-discount-code"),i=$(h).data("discountedAmount");b+=i?parseFloat(i,10)*g:e*g}),this.component.find(".products-total-amount").text(b.formatMoney(2)).attr("total-sum",b)},rc.comp.Cart.send=function(a,b){return a=a||new jQuery.Deferred,b=b||{},b.__action=rc.actions.selectProductList,rc.comp.remoting.send(a,b,$.proxy(this.done,this),this.fail),a.promise()},rc.comp.Cart.done=function(a,b,c){var e=this.component.find(".cart-select");e.empty();var f=c;f.name="Parent Event",e.append(this.getOptionGroup(f));for(var g=0;g<f.sessionList.length;++g){var h=f.sessionList[g];e.append(this.getOptionGroup(h))}this.component.find(".cart-select").select2({placeholder:"Select a Product"});var i=this;this.component.find(".add-product").click(function(a){var b=$(this).closest(".rc-component-cart").find(".cart-select option:selected")[0],c=$.data(b,"product");return c.quantity=0,i.appendProductRow(c),i.initialize(),a.preventDefault(),!1});this.component.find(".panel-body").html("");var m=this.data.selectedProducts;if(m&&this.idProductMap&&rc.getKeys(this.idProductMap).length>0){m=$(document.createElement("span")).html(m).text();for(var n=JSON.parse(m),g=0;g<n.length;++g){var o=n[g];if(o){var p=this.idProductMap[o.id];p.quantity=o.def_quantity?o.def_quantity:0,p.productSlot=o.productSlot,p.hideProductDescription=o.hideProductDescription,p.hideDiscountCode=o.hideDiscountCode,p.creatGivingProduct=null!=o.creatGivingProduct?o.creatGivingProduct:"true",i.appendProductRow(p)}}}this.refreshEmptyCartMessage(),this.initialize()},rc.comp.Cart.initialize=function(){this.component.find(".panel-body .product-entry-row").each(function(a,b){var c=$(b).attr("create-giving-product");$(b).find('[data-cascade="data-create-giving-product"][data-value="'+c+'"]').click();var d="true"==$(b).attr("product-description-hidden")?"true":"false";$(b).find(".rc-toggle-description[data-value="+d+"]").attr("disabled","disabled"),$(b).find(".rc-toggle-description[data-value="+d+"]").addClass("rc-opacity-md"),"true"==d?$(b).find(".product-description").hide():$(b).find(".product-description").show();var e="true"==$(b).attr("discount-code-hidden")?"true":"false";$(b).find(".rc-toggle-discount-code[data-value="+e+"]").attr("disabled","disabled"),$(b).find(".rc-toggle-discount-code[data-value="+e+"]").addClass("rc-opacity-md"),"true"==e?($(b).find(".discount-code").hide(),$(b).find(".product-discount-code").hide()):($(b).find(".discount-code").show(),$(b).find(".product-discount-code").show())})},rc.comp.Cart.refreshEmptyCartMessage=function(){var a=this.component.find(".panel-body .row").length;if(0==a){var b=$($("#rc-component-cart-empty-cart-msg").html());this.component.find(".panel-body").append(b)}},rc.comp.Cart.getOptionGroup=function(a){if(!a.productList||0==a.productList.length)return null;a.name=a.name?a.name:"Event";var b=$('<optgroup label="" />');b.attr("label",a.name);for(var c=0;c<a.productList.length;++c){var d=a.productList[c],e=$("<option/>",{value:d.Id,text:d.type+" : "+d.name});this.idProductMap[""+d.Id]=d,$.data(e[0],"product",d),b.append(e)}return b},rc.comp.Cart.isProductAlreadyAdded=function(a){var b=$(".rc-component .rc-component-cart-content .product-entry-row[data-product-id='"+a.Id+"']");return b.length>0?(a.quantity=parseInt(b.find("input.default-quantity").val(),10),a.quantity=a.quantity?a.quantity+1:1,b.find("input.default-quantity").val(a.quantity).trigger("change"),b):null},rc.comp.Cart.isValidPurchaseQuantity=function(a){var b=$(a),c=b.attr("data-purchase-limit");if(!c)return!0;c=parseInt(c,10);var d=b.find(".product-quantity").val();return d=d?parseInt(d,10):0,d>c?(b.addClass("quantity-limit-error"),b.find(".product-quantity").val(c).trigger("change"),!1):void 0},rc.comp.Cart.appendProductRow=function(a){if(a){var b=this,c=$(this.component),d=rc.comp.Cart.isProductAlreadyAdded(a);if(null!=d)return void rc.ui.showMessagePopup(rc.ui.INFO,"Product already added to form, Default quantity updated (+1) to "+a.quantity);var e=$(".rc-component-cart-content .product-entry-row[data-product-type='"+a.type+"']").length;if(e>=rc.maxProductCount)return void rc.ui.showMessagePopup(rc.ui.ERROR,"Maximum allowed count for product type:"+a.type+", reached!");var f=null;if(a.productSlot&&""!=a.productSlot&&rc.getIfProductSlotAvailable(a.productSlot)?(rc.validateProductSlot(a.productSlot,"stub"),f=a.productSlot):f=rc.getProductSlot(),!f)return void rc.ui.showMessagePopup(rc.ui.ERROR,"Maximum allowed products added !");0==c.find(".panel-body .row").length&&c.find(".panel-body").html("");var g=$($("#rc-component-cart-row-template").html());a.quantity=a.quantity||0,a.type==a.TYPE_TICKET?g.find(".product-logo i").addClass("fa-ticket"):a.type==a.TYPE_MEAL?(g.find(".product-logo i").addClass("fa-cutlery"),g.find(".dropdown").hide(),g.find(".discount-code-element").hide()):a.type==a.TYPE_ITEM&&(g.find(".product-logo i").addClass("fa-gift"),g.find(".dropdown").hide(),g.find(".discount-code-element").hide()),g.attr("data-product-type",a.type),g.attr("data-product-id",a.Id),g.attr("data-product-slot",f),g.attr("data-purchase-limit",a.purchaseLimit),g.find(".product-name").text(a.name),g.find(".product-description").text(a.description),a.purchasePrice=a.purchasePrice||0,g.find(".product-price").text(a.purchasePrice.formatMoney(2)),g.find("input.product-quantity").val(a.quantity),g.find("input.product-quantity").on("change",function(){var d=$(this).closest(".product-entry-row");0==b.isValidPurchaseQuantity(d)&&rc.ui.showMessagePopup(rc.ui.ERROR,"Purchase limit for "+a.name+" reached. Cannot buy more than "+a.purchaseLimit+" units."),$(b.component).trigger("recalculate-sum")}),g.find("input.product-discount-code").on("change",function(){var c=$(this).closest(".product-entry-row");b.calculateProductDiscountCode(c)}),g.find("button.remove-product").click(function(){var c=$(this).closest(".product-entry-row").next(".separator-line");c.remove();var d=$(this).closest(".product-entry-row"),e=d.attr("data-product-slot");return rc.emptyProductSlot(e),d.remove(),$(b.component).trigger("recalculate-sum"),b.refreshEmptyCartMessage(),!1});var h=g.filter(".product-entry-row")[0];return $.data(h,"product",a),g.find(".product-quantity").spinner({spin:function(a,b){return b.value<0?($(this).spinner("value",0),!1):void 0},change:function(){$(this).trigger("change")}}),g.attr("create-giving-product",a.creatGivingProduct),g.find(".rc-toggle-primary").on("click",rc.ui.togglePrimary),g.find(".rc-cascade-value").on("click",rc.ui.cascadeValue),g.attr("product-description-hidden",a.hideProductDescription),g.find(".rc-toggle-description").on("click",rc.ui.toggleDescription),g.attr("discount-code-hidden",a.hideDiscountCode),g.find(".rc-toggle-discount-code").on("click",rc.ui.toggleDisountCode),c.find(".panel-body").append(g),$(b.component).trigger("recalculate-sum"),!1}},rc.comp.Cart.populateSetupSaveData=function(a,b){var c=[];return $(a).find(".product-entry-row").each(function(a,b){var b=$(b),d={};return d.id=b.attr("data-product-id"),d.id?(d.def_quantity=b.find("input.product-quantity").val(),d.productSlot=b.attr("data-product-slot"),d.creatGivingProduct=b.attr("data-create-giving-product"),d.hideProductDescription=b.attr("product-description-hidden"),d.hideDiscountCode=b.attr("discount-code-hidden"),void c.push(d)):!0}),b.selectedProducts=JSON.stringify(c),b},rc.comp.Cart.populateUpsertData=function(a){if(a){var b=$(".rc-component .rc-component-cart-content .product-entry-row");$(b).each(function(b,c){var d=$.data(c,"product");c=$(c);var e=c.attr("data-product-slot");if(!e)return!0;var f=rc.prodMap[e],g=c.attr("data-product-id");if(!g)return!0;var h=c.attr("data-product-type"),i=c.attr("data-create-giving-product");"true"==i&&(h+="_Giving");var j=c.find("input.product-quantity").val(),k=$(c).find(".product-discount-code"),l=$(k).data("discountedAmount"),m=d.purchasePrice||0;m=parseFloat(m),a[e]=g,a[f+"_quantity__c"]=j,a[f+"_type__c"]=h,a[f+"_discounted_amount__c"]=0!=l?m-l:"",a[f+"_discount_code__c"]=k.val()});var c=rc.comp.Cart.getPaymentDetails();return c&&c.finalAmount&&""!=c.finalAmount&&(a[rc.ns+"event_purchase_giving_amount__c"]=c.finalAmount),a}},rc.comp.Cart.renderUpsertData=function(a){for(var b=rc.getKeys(rc.prodMap),c=0;c<b.length;++c){var d=b[c],e=rc.prodMap[d],f=a[d];if(f&&"Session"!=a[e+"_type__c"]&&"Product"!=a[e+"_type__c"]&&"Attribute"!=a[e+"_type__c"]){var g=$(".rc-component .rc-component-cart-content .product-entry-row[data-product-id='"+f+"']");if(g&&0!=g.length){var h=$.data(g[0],"product"),i=a[e+"_quantity__c"]||0;i=parseInt(i,10);var j=a[e+"_discount_code__c"];g.find(".product-discount-code").val(j);var k=a[e+"_discounted_amount__c"]||0,l=h.purchasePrice||0,m=0;0!=k&&(m=l-k||0);var n=g.find(".product-discount-code");$(n).data("discountedAmount",m),g.find("input.default-quantity").val(i).trigger("change"),a[e+"_type__c"].indexOf("_Giving")>-1&&g.find('[data-cascade="create-giving-product"][data-value="true"]').click()}}}},rc.comp.Cart.calculateProductDiscountCode=function(a,b,c){if(a&&0!=a.length){var d=$.data(a[0],"product"),e=$(a);c=c||new jQuery.Deferred;var f=e.attr("data-product-id"),g=e.find(".product-quantity").val();if(b=b||{},b.__product=f,b.__discountCode=e.find(".product-discount-code").val(),b.__purchasePrice=d.purchasePrice||0,null==b.__discountCode||""==b.__discountCode){var h=$(e).find(".product-discount-code"),i=0;return $(h).data("discountedAmount",i),void $(e).trigger("recalculate-sum")}return 0==g?(rc.ui.showMessagePopup(rc.ui.ERROR,rc.zeroQuantityError),void e.find(".product-discount-code").val("")):(rc.ui.showMessagePopup(rc.ui.INFO,"Applying discount code..."),b.__action=rc.actions.selectDiscountCodeList,this.row=e,rc.comp.remoting.send(c,b,$.proxy(rc.comp.Cart.calculateProductDiscountCode.done,this),rc.comp.Cart.calculateProductDiscountCode.fail),c.promise())
}},rc.comp.Cart.calculateProductDiscountCode.done=function(a,b,c){var e=c.__error;e?(rc.ui.showMessagePopup(rc.ui.ERROR,e),$(this.row).find(".product-discount-code").val("")):rc.ui.showMessagePopup(rc.ui.SUCCESS,rc.validMessageDiscountCode);var f=c.__discount,g=$(this.row).find(".product-discount-code");$(g).data("discountedAmount",f);var h=this;$(h.row).trigger("recalculate-sum")},rc.comp.Cart.calculateProductDiscountCode.fail=function(a,b,c,d){console.error("rc.comp.Cart.calculateProductDiscountCode.fail"),console.error("this",this),console.error("send",b),console.error("recv",c),console.error("meta",d)},rc.comp.validateCampaignAskSection=function(){var a=$('.rc-component-workflow-action[data-method="send-payment"]').attr("data-value"),b=$('.rc-component-campaign-ask[data-component-type="campaign-ask"]').find(".rc-campaign-ask-frequency-list").find('.btn[data-value != "Monthly"]');"corduro"==a?($('.rc-component-campaign-ask[data-component-type="campaign-ask"]').find(".rc-campaign-ask-frequency-list").find('.btn[data-value != "One Payment"]').addClass("disabled"),$('.rc-component-campaign-ask[data-component-type="campaign-ask"]').find(".rc-campaign-ask-frequency-list").find('.btn[data-value = "One Payment"]').trigger("click"),0!=b.size()&&$('.rc-component-campaign-ask[data-component-type="campaign-ask"]').find(".note[data-giving-frequency='Monthly']").hide()):($('.rc-component-campaign-ask[data-component-type="campaign-ask"]').find(".rc-campaign-ask-frequency-list").find('.btn[data-value != "One Payment"]').removeClass("disabled"),0!=b.size()&&$('.rc-component-campaign-ask[data-component-type="campaign-ask"]').find(".note[data-giving-frequency='Monthly']").show())},rc.comp.CreditCard=function(a,b){this.container=a,this.type="CreditCard",this.data=b,this.component=rc.comp.insert("#rc-component-credit-card",this.container,this.data),this.headers=this.component.find(".rc-component-headers"),this.content=this.component.find(".rc-component-content"),this.component.attr("data-payment-processor",b["payment-processor"]),this.component.attr("data-auth-only",b["auth-only"]),this.component.attr("data-test-only",b["test-only"]),this.component.attr("data-merchant-id",b["merchant-id"]),this.component.attr("data-advanced-fraud-detection",b["advanced-fraud-detection"]),this.component.attr("data-advanced-fraud-detection-test-mode",b["advanced-fraud-detection-test-mode"]),this.component.find('[data-name="'+rc.ns+'payment_method_card_number__c"]').on("keyup",rc.comp.CreditCard.format),this.component.find('[data-field-hidden="true"]').each(function(a,c){var d=$(c).find(".form-control"),e=$(c).attr("data-default-value");e&&""!=e&&d.val(e);var f=d.attr("name");if(!f||""==f)return!0;var g=b[f];if(!g||""==g)return!0;if("text"==d.attr("type"))d.val(g);else if("checkbox"==d.attr("type")){var h="true"==g?!0:!1;d.prop("checked",h)}})},rc.comp.CreditCard.format=function(){var a=$(this).val(),b=$(this).val();b=b.replace(/[^\d]+/g,""),b=b.substring(0,16),b=b.match(/.{1,4}/g),b=b?b.join(" "):"",a!=b&&($(this).val(b),rc.validate.validateField(rc.ns+"payment_method_card_number__c"))},rc.comp.Button=function(a,b){this.container=a,this.type="Button",this.data=b,this.component=rc.comp.insert("#rc-component-button",this.container,this.data),this.headers=this.component.find(".rc-component-headers"),this.content=this.component.find(".rc-component-content"),this.content.find(".rc-name").text(b.text),this.content.find(".rc-icon").addClass(b.icon);var c=this.content.find(".dropdown-menu");$("#rc-workflows-list").find(".rc-container-workflow").each(function(){var a=$(this),b=$('<li><a class="rc-cursor-pointer rc-cascade-value rc-cascade-dropdown-text"></a></li>');b.find("a").attr("data-cascade","data-workflow"),b.find("a").attr("data-value",a.attr("id")),b.find("a").text(a.find(".rc-workflow-name").val()),b.find("a").on("click",rc.ui.cascadeValue),b.find("a").on("click",rc.ui.cascadeDropdownText),c.append(b)}),this.content.find(".btn-execute").on("click",rc.comp.Button.execute),this.content.find('[data-cascade="data-workflow"][data-value="'+b.workflow+'"]').click()},rc.comp.Button.execute=function(){var a=$(this);a.prop("disabled",!0);var b=rc.validate.isFormValid(),c=rc.comp.CampaignAsk.validateAskValue(),d=rc.comp.Cart.validate(),e=rc.comp.Session.validate(),f=b&&c&&d&&e;rc.enableLocalOnly(!0);var g=$.trim($(this).closest("[data-workflow]").attr("data-workflow"));"view"==rc.getCurrentMode()&&f&&g?rc.wf.execute(g,a):rc.reenable(a)},rc.comp.Jumbotron=function(a,b){this.container=a,this.type="Jumbotron",this.data=b,this.component=rc.comp.insert("#rc-component-jumbotron",this.container,this.data),this.headers=this.component.find(".rc-component-headers"),this.content=this.component.find(".rc-component-content"),this.component.find(".rc-header").text(b.header),this.component.find(".rc-text").text(b.text)},rc.comp.SimpleHeader=function(a,b){this.container=a,this.type="SimpleHeader",this.data=b,this.component=rc.comp.insert("#rc-component-simple-header",this.container,this.data),this.headers=this.component.find(".rc-component-headers"),this.content=this.component.find(".rc-component-content"),this.component.find(".rc-component-content .rc-value").html(b.text)},rc.comp.CopyParameterAction=function(){},rc.comp.CopyParameterAction.refreshMergeFieldPicklist=function(a){var b=$(a).find('[data-template="#rc-component-workflow-action--copy-param"]'),c=[];$("#rc-page-container .rc-component-merge-field-content").each(function(a,b){var d=$(b).find(".rc-field-name").attr("name")||"";if(!d)return!0;var e=$(b).find("label.control-label").text()||d,f=$('<li><a class="rc-cursor-pointer rc-cascade-dropdown-text rc-cascade-value" data-value=""></a></li>');f.find(".rc-cascade-value").attr("data-value",d),f.find(".rc-cascade-value").text(e),c.push(f)}),b.find('[data-dropdown-menu="target-fields"]').html("").append(c),b.find(".rc-cascade-value").on("click",rc.ui.cascadeValue),b.find(".rc-cascade-dropdown-text").on("click",rc.ui.cascadeDropdownText)},rc.comp.Image=function(a,b){this.container=a,this.type="Image",this.data=b,this.component=rc.comp.insert("#rc-component-image",this.container,this.data),this.headers=this.component.find(".rc-component-headers"),this.content=this.component.find(".rc-component-content"),this.component.find("img").attr("src",b.data)},rc.comp.URLLink=function(a,b){this.container=a,this.type="URLLink",this.data=b,this.component=rc.comp.insert("#rc-component-url-link",this.container,this.data),this.component.find(".rc-url-label .form-control").val(b.label),this.component.find(".rc-url-link .form-control").val(b.link),this.component.find("input.form-control").on("blur",function(){var b=$(this).closest(".rc-component"),c=b.find(".rc-url-label .form-control").val()||"Untitled Link",d=b.find(".rc-url-link .form-control").val();if(d=$.trim(d)){var e=new RegExp("^((https?|ftp)://)|//","i");e.test(d)||(d="//"+d)}var f=rc.comp.URLLink.isValidURL(d),g="Invalid URL.";if($(this).closest(".form-group.rc-url-link").toggleClass("has-error",!f),f){rc.ui.getComponentMessages(b,g).remove(),d=d||"javascript:void(0)";var h=$(window).width(),i=$(window).height(),j="window.open('"+d+"', 'newwindow', 'menubar=1, resizable=1, width="+h+", height="+i+"'); return false;";b.find(".rc-component-url-link-view-content a.rc-url-link-anchor").text(c).attr("href",d).attr("onclick",j)}else rc.ui.addMessageToComponent(b,g,rc.ui.ERROR)}),this.component.find(".form-control").trigger("blur")},rc.comp.URLLink.isValidURL=function(a){if(!a)return!1;var b=new RegExp("^((https?:)|(ftp:))?//(-.)?([^s/?.#-]+.?)+(/[^s]*)?","i");return b.test(a)},rc.comp.SimpleText=function(a,b){this.container=a,this.type="SimpleText",this.data=b,this.component=rc.comp.insert("#rc-component-simple-text",this.container,this.data),this.headers=this.component.find(".rc-component-headers"),this.content=this.component.find(".rc-component-content"),this.component.find(".rc-component-content .rc-value").html(b.text)},rc.comp.InternalJavascript=function(a,b){this.container=a,this.type="InternalJavascript",this.data=b||{},this.component=rc.comp.insert("#rc-component-internal-javascript",this.container,this.data),this.headers=this.component.find(".rc-component-headers"),this.content=this.component.find(".rc-component-content"),this.component.find(".rc-component-content .form-control").val(rc.html_decode(this.data.text));var c=this.component.find(".rc-component-content script");setTimeout(function(){c.html("$(document).ready(function() { "+rc.html_decode((b||{}).text)+" });")},10)},rc.comp.ExternalJavascript=function(a,b){this.container=a,this.type="ExternalJavascript",this.data=b,this.component=rc.comp.insert("#rc-component-external-javascript",this.container,this.data),this.headers=this.component.find(".rc-component-headers"),this.content=this.component.find(".rc-component-content"),this.component.find(".rc-component-content .form-control").val(b.text),this.component.find(".rc-component-content script").attr("src",b.text)},rc.comp.ExternalStylesheet=function(a,b){this.container=a,this.type="ExternalStylesheet",this.data=b,this.component=rc.comp.insert("#rc-component-external-stylesheet",this.container,this.data),this.headers=this.component.find(".rc-component-headers"),this.content=this.component.find(".rc-component-content"),this.component.find(".rc-component-content .form-control").val(b.text),this.component.find(".rc-component-content link").attr("href",b.text)},rc.comp.HtmlBlock=function(a,b){this.container=a,this.type="HtmlBlock",this.data=b,this.component=rc.comp.insert("#rc-component-html-block",this.container,this.data),this.headers=this.component.find(".rc-component-headers"),this.content=this.component.find(".rc-component-content");var d=this.component.find(".rc-component-content .rc-value"),e=this.component.find(".rc-component-html-view-content .rc-value");$.data(d[0],"html-content",b.text);var f=d.attr("style");e.html(b.text).attr("style",f),rc.isEditMode&&rc.comp.HtmlBlock.initializeHTMLEditor(this.component,b.text)},rc.comp.HtmlBlock.initializeHTMLEditor=function(a,b){var c=a.find(".rc-component-content .rc-value"),d=a.find(".rc-component-html-view-content .rc-value"),e=CodeMirror(function(b){a.find(".rc-component-html-editor").append(b)},{lineNumbers:!0,value:b,mode:{name:"htmlmixed"},indentUnit:4,lineWrapping:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],extraKeys:{"Ctrl-Space":"autocomplete",F11:function(a){a.setOption("fullScreen",!a.getOption("fullScreen"))},Esc:function(a){a.getOption("fullScreen")&&a.setOption("fullScreen",!1)}}});e.on("change",function(a){$.data(c[0],"html-content",a.getValue()),d.html(a.getValue())}),"edit"==rc.getCurrentMode()?a.find(".rc-component-html-editor:first").show():a.find(".rc-component-html-editor:first").hide()},rc.comp.HtmlBlock.refreshView=function(){var c=$("#rc-container-list").find(".rc-component-html-block");c.length&&$(c).each(function(a,b){b=$(b);var c=$.data(b.find(".rc-component-html-content .rc-value")[0],"html-content");c=rc.stripTags(c,"script"),b.find(".rc-component-html-view-content .rc-value").html(c),"edit"==rc.getCurrentMode()?b.find(".rc-component-html-editor:first").show():b.find(".rc-component-html-editor:first").hide()})},rc.comp.AdvancedCSS=function(a,b){this.container=a,this.type="AdvancedCSS",this.data=b,this.component=rc.comp.insert("#rc-component-advanced-css",this.container,this.data),this.headers=this.component.find(".rc-component-headers"),this.content=this.component.find(".rc-component-content"),this.component.find("style").html(b.text),this.component.find("textarea").val(b.text);var c=this;this.component.find("textarea").on("keyup",function(){c.component.find("style").html($(this).val())})},rc.comp.registerMergeFieldAutoComplete=function(a,b){function c(a){return a.split(/,\s*/)}function d(a){return c(a).pop()}$(a).bind("keydown",function(a){a.keyCode===$.ui.keyCode.TAB&&$(this).data("ui-autocomplete").menu.active&&a.preventDefault()}).autocomplete({minLength:0,source:function(a,c){c($.ui.autocomplete.filter(b,d(a.term)))},focus:function(){return!1},select:function(a,b){var d=c(this.value);return d.pop(),d.push(b.item.value),d.push(""),this.value=d.join(", "),!1}})},rc.comp.insertLitleProfilingTag=function(){var a=$("#rc-litle-advance-fraud-detection").html(),b=$(a),c=b.filter("script"),d=b.filter("iframe"),e=c.attr("data-lib-src"),f=d.attr("data-lib-src");return e+=rc.sessionId,f+=rc.sessionId,c.attr("src",e).attr("data-lib-src",""),d.attr("src",f).attr("data-lib-src",""),$("body:first").prepend(b),b},rc.comp.Session=function(a,b){this.container=a,this.type="session",this.data=b,this.component=rc.comp.insert("#rc-component-session",this.container,this.data),this.headers=this.component.find(".rc-component-headers"),this.content=this.component.find(".rc-component-content");var c=[{id:"title",text:"Title"},{id:"description",text:"Description"},{id:"from-date",text:"From Date"},{id:"to-date",text:"To Date"}];rc.initializeViewSelector(this,c,["title","description","from-date","to-date"]),b.header=b.header||"Event Session",this.component.find(".session-header-text").text(b.header),this.send=rc.comp.Session.send,this.done=rc.comp.Session.done,this.appendSessionRow=rc.comp.Session.appendSessionRow,this.idProductMap={},this.component.find(".input-group").attr("data-required",b.required)},rc.comp.Session.validate=function(){var a=$("#rc-container-list .rc-component-session .message-header"),b=$("#rc-container-list .rc-component-session-content").find(".input-group").attr("data-required"),c=!1;if(0==$("#rc-container-list .rc-component-session-content").length)return!0;$("#rc-container-list .rc-component-session-content .register-link").each(function(a,b){1==$(b).hasClass("selected-session")&&(c=!0)});var d=0==c?!1:!0,e="Please register for atleast one session and resubmit.",f=$("#rc-container-list .rc-component-session-content");if("true"==b&&0==c)return $("#rc-container-list .rc-component-session-content .register-link").closest(".form-group").toggleClass("has-error",0==d),a.text(rc.ui.MessageHeaders[rc.ui.ERROR]+" "),f.find(".session-validation-error").show(),rc.ui.showMessagePopup(rc.ui.ERROR,e),d;$("#rc-container-list .rc-component-session-content .register-link").closest(".form-group").toggleClass("has-error",!1),a.text("");var g=$(f).find(".component-alert .message-text:contains("+e+")");return g.length&&g.closest(".component-alert ").remove(),!0},rc.comp.Session.send=function(a,b){return a=a||new jQuery.Deferred,b=b||{},b.__action=rc.actions.selectProductList,rc.comp.remoting.send(a,b,$.proxy(this.done,this),this.fail),a.promise()},rc.comp.Session.done=function(a,b,c){this.component.find("[data-session-slot]").each(function(a,b){rc.emptyProductSlot($(b).attr("data-session-slot"))});for(var e=c,f=0;f<e.sessionList.length;++f){var h,g=e.sessionList[f],i=this.data.selectedSessions;if(i){h=JSON.parse(i);for(var j=0;j<h.length;j++){var k=h[j];if(k&&g.campaignId==k.id){g.productSlot=k.productSlot,g.id=k.id;break}}}this.appendSessionRow(g)}$(this.component).find(".register-link").click(function(){var b=!$(this).hasClass("selected-session");return rc.comp.Session.toggleRegisterButton(b,this),!1}),rc.initializeViewSelector.rerender(this)},rc.comp.Session.toggleRegisterButton=function(a,b){1==a?($(b).removeClass("btn-primary").addClass("btn-success").addClass("selected-session").find(".register-link-text").text("Registered"),$(b).find(".glyphicon-remove").show()):($(b).removeClass("btn-success").addClass("btn-primary").removeClass("selected-session").find(".register-link-text").text("Register"),$(b).find(".glyphicon-remove").hide())},rc.comp.Session.isSessionAlreadyAdded=function(a){var b=$(".rc-component .rc-component-session-content .session-entry-row[data-session-id='"+a.Id+"']");return b.length>0?b:null},rc.comp.Session.appendSessionRow=function(a){if(a){var c=$(this.component),d=$($("#rc-component-session-row-template").html()),e=rc.comp.Session.isSessionAlreadyAdded(a);if(null!=e)return void rc.ui.showMessagePopup(rc.ui.INFO,"Session already added to form");var f=null;if(a.productSlot&&""!=a.productSlot?(rc.emptyProductSlot(a.productSlot),f=a.productSlot):f=rc.getProductSlot(),!f)return void rc.ui.showMessagePopup(rc.ui.ERROR,"Maximum allowed products added !");d.attr("data-session-type","session"),d.attr("data-session-id",a.campaignId),d.attr("data-session-slot",f),d.find(".session-name").text(a.name),d.find(".session-description").text(a.description);var g=moment(a.StartDateTime).format("MM/DD/YYYY h:mm a"),h=moment(a.EndDateTime).format("MM/DD/YYYY h:mm a");d.find(".session-startDate").text(g),d.find(".session-endDate").text(h);var i=d.filter(".session-entry-row")[0];return $.data(i,"session",a),c.find(".session-panel-body").append(d),!1}},rc.comp.Session.populateSetupSaveData=function(a,b){var c=[],d=$(a).find(".view-component-select").val();if(d&&d.length>0){var e=d.join(",");b.selectedViewComponents=e}return $(a).find(".session-entry-row").each(function(a,b){var b=$(b),d={};return d.id=b.attr("data-session-id"),d.id?(d.productSlot=b.attr("data-session-slot"),void c.push(d)):!0}),b.selectedSessions=JSON.stringify(c),b},rc.comp.Session.populateUpsertData=function(a){if(a){var b=$(".rc-component .rc-component-session-content .session-entry-row");return $(b).each(function(b,c){c=$(c);var d=c.attr("data-session-slot"),e=rc.prodMap[d],f=c.attr("data-session-id"),g=c.attr("data-session-type");if(c.find(".register-link").hasClass("selected-session"))a[d]=f,a[e+"_type__c"]=g,a[e+"_quantity__c"]=1;else if("1"==c.attr("data-register-flag")){var f=c.attr("data-session-id"),g=c.attr("data-session-type");a[d]=f,a[e+"_type__c"]=g,a[e+"_quantity__c"]=-1}}),a}},rc.comp.Session.renderUpsertData=function(a){for(var b=rc.getKeys(rc.prodMap),c=0;c<b.length;++c){var d=b[c],e=rc.prodMap[d],f=a[d];if(f&&"Session"==a[e+"_type__c"]){var g=$(".rc-component .rc-component-session-content .session-entry-row[data-session-id='"+f+"']");if(!g||0==g.length)continue;g.attr("data-session-slot")!=d&&(g.attr("data-session-slot",d),rc.emptyProductSlot(g.attr("data-session-slot")));var h=g.find(".register-link"),i=a[e+"_quantity__c"];i=parseInt(i),g.attr("data-register-flag",i),1==i&&rc.comp.Session.toggleRegisterButton(!0,h)}}},rc.dataModal.BatchUploadModel={},rc.dataModal.getFieldByName=function(a,b){var c=$(b).filter(":first");return c.length>0?c.val():rc.dataModal.BatchUploadModel[a]||""},rc.wf.executingMap={},rc.wf.retroactiveFailure=null,rc.wf.quenchByGuid={},rc.wf.hasPaymentProcessor=function(){return $('#rc-workflows-list .rc-component-workflow-action[data-method="send-payment"]').length>0},rc.wf.forceFail=function(a,b,c){rc.wf.quenchByGuid[b]=!0,console.log(c),a.reject(c)},rc.wf.execute=function(a,b){b&&b.prop("disabled",!0);var c=$("#"+a),d=new jQuery.Deferred,e=d.promise();rc.wf.retroactiveFailure=new jQuery.Deferred;var f=rc.wf.retroactiveFailure.promise();rc.wf.executingMap[a]=!0,c.find('[data-component-type="workflow-action"]').each(function(){{var c=$(this),d=c.attr("data-context"),g=c.attr("id");c.attr("data-method")}("then"==d||"execute"==d)&&(e=e.then(function(){return rc.wf.process("then",g,{workflowGuid:a},b)})),"done"==d&&e.done(function(){return rc.wf.quenchByGuid[a]?void 0:rc.wf.process("done",g,{workflowGuid:a},b)}),"fail"==d&&(e.fail(function(){return rc.wf.quenchByGuid[a]?void 0:rc.wf.process("fail",g,{workflowGuid:a},b)}),f.fail(function(){return rc.wf.process("fail",g,{workflowGuid:a},b)}))}),e.always(function(){if(rc.wf.executingMap[a]=!1,b){var c=!1;for(var d in rc.wf.executingMap)c=c||rc.wf.executingMap[d];c||rc.reenable(b)}rc.wf.quenchByGuid[a]=null}),d.resolve()},rc.wf.process=function(a,b,c,d){d&&d.prop("disabled",!0);var e=new jQuery.Deferred;e.workflowGuid=c.workflowGuid;var f=$("#"+b),g={};g["copy-param"]=rc.wf.process.CopyParameter,g.javascript=rc.wf.process.Javascript,g["load-data"]=rc.wf.process.LoadData,g["load-href"]=rc.wf.process.LoadHref,g["load-page"]=rc.wf.process.LoadPage,g["send-data"]=rc.wf.process.SendData,g["send-mail"]=rc.wf.process.SendMail,g["send-payment"]=rc.wf.process.SendPayment,g["traffic-controller"]=rc.wf.process.TrafficController,g.workflow=rc.wf.process.Workflow;var h=f.attr("data-method"),i=g[h]||function(){};try{{new i(e,f,c,d)}}catch(k){console.error("exception",k),e.reject()}return e.promise()},rc.wf.process.CopyParameter=function(a,b){var d=$(b).attr("data-parameter"),e=$(b).attr("data-value");$('.form-control[name="'+e+'"]').val(rc.getParam(d)||""),a.resolve()},rc.wf.process.Javascript=function(deferred,action,data){deferred=deferred||new jQuery.Deferred,action=action||$();var action_data=action.find('.rc-fg[data-method="javascript"] .form-control').val(),action_function=eval("(function(deferred, data) { "+action_data+" })"),action_eval=action_function.call(action,deferred,data);0==action_eval?deferred.reject():deferred.resolve()},rc.wf.process.LoadData=function(a){rc.selectData(a,null)},rc.wf.process.LoadPage=function(a,b){var d=rc.paramFormCampaignId;""==d&&(d=rc.campaignId);var e=rc.pageCampaignDesignForm+"?id="+rc.campaignId+"&formCampaignId="+d;null!=rc.getParam("data")&&""!=rc.getParam("data")&&(e+="&data="+rc.getParam("data")),e+=rc.isEditMode?"#mode=view&form="+$(b).attr("data-value"):"&form="+$(b).attr("data-value"),window.location=e},rc.wf.process.TrafficController=function(){var d=rc.paramFormCampaignId;""==d&&(d=rc.campaignId);var e=rc.pageCampaignTrafficControllerRoute+"?id="+rc.campaignId+"&formCampaignId="+d+"&form="+rc.getParam("form")+"&data="+rc.getParam("data");window.location=e},rc.wf.process.LoadHref=function(a,b){var d=$(b).attr("data-value");if(null!=d&&""!=d)return window.location=d.match("(http:|https:)?(/?)/.+")?d:"//"+d,!1},rc.wf.process.SendData=function(a,b,c){rc.upsertData(a,c)},rc.wf.process.SendMail=function(a,b){a=a||new jQuery.Deferred,b=b||$();var d=b.attr("data-mail-to")||"",e=b.attr("data-mail-reply-to")||"",f=b.attr("data-mail-subject")||"",g=b.attr("data-mail-body")||"",h=rc.wf.process.SendMail.getFilteredMailArray(d),i=rc.wf.process.SendMail.getFilteredMailArray(e);h&&h.length||a.reject();var j={};j.__action=rc.actions.sendMail,j.toList=h.join(),j.replyTo=i.length?i[0]:"",j.subject=f,j.body=g,this.done=rc.wf.process.SendMail.done,rc.comp.remoting.send(a,j,this.done,this.fail)},rc.wf.process.SendMail.done=function(){},rc.wf.process.SendMail.getFilteredMailArray=function(a){for(var b=[],c=a.split(","),d=0;d<c.length;d++){var e=$.trim(c[d]);if(e&&rc.wf.process.SendMail.isValidMergeField(e)){var f=rc.ui.MergeFieldMap[e].field||"",g=$('input[name="'+f+'"]:first').val()||"",h=rc.ui.MergeFieldMap[e].control||"",i=h?$('input[name="'+h+'"]:first').is(":checked"):!1;if(1==i)continue;g&&b.push(g)}else e&&rc.wf.process.SendMail.isValidEmail(e)&&b.push(e)}return b},rc.wf.process.SendMail.isValidEmail=function(a){return null!==a.match(/.+@.+\..+/i)},rc.wf.process.SendMail.isValidMergeField=function(a){if(!a)return!1;var b=new RegExp("^(<Contact Mail [1|2]>)$");return b.test(a)},rc.wf.process.SendPayment=function(a,b,c){if($(".form-control").filter(":visible:NOT(input.product-discount-code)").change(),0==$(".form-group.has-error").length){var d=rc.comp.Cart.getPaymentDetails()||{finalAmount:0},e=rc.comp.CampaignAsk.getAskValue()||{finalAmount:0};if(0==d.finalAmount&&0==e.finalAmount)return rc.wf.process.populateDefaultFields(b,c),a.resolve();b.paymentDetails=rc.comp.CampaignAsk.getAskValue(),b.paymentDetails?(b.paymentDetails=b.paymentDetails||{},b.paymentDetails.isGiving=!0,b.paymentDetails.givingAmount=b.paymentDetails.finalAmount||0):(b.paymentDetails=b.paymentDetails||{},b.paymentDetails.isGiving=b.paymentDetails.isGiving||!1);var f=jQuery.extend(!0,{},b);f.paymentDetails=rc.comp.Cart.getPaymentDetails(),f.paymentDetails?(f.paymentDetails=f.paymentDetails||{},b.paymentDetails.isEvent=!0,b.paymentDetails.eventAmount=f.paymentDetails.finalAmount||0):b.paymentDetails.isEvent=b.paymentDetails.isEvent||!1;var g=rc.isNumericOrNull(b.paymentDetails.givingAmount),h=rc.isNumericOrNull(b.paymentDetails.eventAmount);if(!g||!h)return a.reject("Invalid amount format: "+b.paymentDetails.givingAmount+" | "+b.paymentDetails.eventAmount);if(rc.ui.showProcessingModal(),b.paymentDetails.eventGivingAmount=(parseFloat(b.paymentDetails.givingAmount)||0)+(parseFloat(b.paymentDetails.eventAmount)||0)||0,rc.isPaymentTransactional)return rc.enableLocalOnly(!1),1==b.paymentDetails.isGiving&&($('input[name="'+rc.ns+'giving_giving_frequency__c"]').val(b.paymentDetails.frequency),$('input[name="'+rc.ns+'giving_giving_amount__c"]').val(b.paymentDetails.givingAmount)),1==b.paymentDetails.isEvent&&$('input[name="'+rc.ns+'event_purchase_giving_amount__c"]').val(b.paymentDetails.eventAmount),rc.pendingPayment={},rc.pendingPayment.processorParams={},rc.pendingPayment.processorParams.isAdvancedFraudDetection=$(b).attr("data-advanced-fraud-detection"),rc.pendingPayment.processorParams.sessionId=rc.sessionId,rc.pendingPayment.deferred=rc.wf.retroactiveFailure,a.resolve();var i=new jQuery.Deferred;return i.done(function(){a.resolve()}).fail(function(){rc.ui.releaseProcessingModal(),a.reject()}),rc.wf.process.SendPayment.send(i,b,c)}},rc.wf.process.SendPayment.send=function(a,b){return"corduro"==b.attr("data-value")?(0==$("#corduro_snap #maskcorduro_snap").length&&rc.wf.integrations.Corduro(a,b),rc.wf.integrations.Corduro.send(a,b)):"iATS"==b.attr("data-value")?rc.wf.integrations.IATS(a,b):"Cybersource"==b.attr("data-value")?rc.wf.integrations.Cybersource(a,b):"PayPal"==b.attr("data-value")?rc.wf.integrations.PayPal(a,b):"Litle"==b.attr("data-value")?rc.wf.integrations.Litle(a,b):"sage"==b.attr("data-value")?rc.wf.integrations.Sage(a,b):"Authorize.net"==b.attr("data-value")?rc.wf.integrations.AuthDotNet(a,b):"heartland"==b.attr("data-value")?rc.wf.integrations.Sage(a,b):a.reject("No payment processor found!")},rc.wf.process.Workflow=function(a,b,c,d){rc.wf.execute($(b).attr("data-value"),d),a.resolve()},rc.wf.process.populateDefaultFields=function(a){$('input[name="'+rc.ns+'payment_method_card_issuer__c"]').val(rc.wf.process.getCreditCardType($('input[data-name="payment_method_card_number__c"]').val())),$('input[data-name="'+rc.ns+'payment_method_card_number__c"]').attr("name",rc.ns+"payment_method_card_number__c"),$('input[data-name="'+rc.ns+'payment_method_card_security_code__c"]').attr("name",rc.ns+"payment_method_card_security_code__c"),$('input[name="'+rc.ns+'payment_method_payment_type__c"]').val("Charge Card"),$('input[name="'+rc.ns+'batch_upload_campaign_matched__c"]').val(rc.campaignId),$('input[name="'+rc.ns+'payment_processor__c"]').val(a.attr("data-value"))},rc.wf.process.getCreditCardType=function(a){if(void 0==a||""==a)return"";var b=new RegExp("^4[0-9]{12}(?:[0-9]{3})?$"),c=new RegExp("^5[1-5][0-9]{14}$"),d=new RegExp("^2[2-7][0-9]{14}$"),e=new RegExp("^3[47][0-9]{13}$"),f=new RegExp("^3(?:0[0-5]|[68][0-9])[0-9]{11}$"),g=new RegExp("^6(?:011|5[0-9]{2})[0-9]{12}$"),h=new RegExp("^35[0-9]{14}$");return null!=b.exec(a)?"visa":null!=c.exec(a)||null!=d.exec(a)?"mastercard":null!=e.exec(a)?"amex":null!=f.exec(a)?"diners club":null!=g.exec(a)?"discover":null!=h.exec(a)?"jcb":"undefined"},rc.upsertData=function(a,b){if(b=b||{},b.__action=rc.actions.upsertData,b.__data=rc.getParam("data"),a=a||new jQuery.Deferred,$(".rc-component-content .form-control[name]").each(function(){var a=$(this),c=a.attr("name");b[c]="checkbox"===a.attr("type")?a.is(":checked")?"true":"false":a.val(),c==rc.ns+"giving_record_type__c"&&"text"===a.attr("type")&&""==a.val()&&""==a.attr("data-field-default")&&(b[c]="Donation"),a.change()}),0==rc.upsertData.validateCustomComponents())return a.reject(b);if("view"!=rc.getCurrentMode())return a.reject("Internal error: form must be in view mode to process user input.");b=rc.comp.Cart.populateUpsertData(b),b=rc.comp.Session.populateUpsertData(b),b=rc.comp.Attribute.populateUpsertData(b);var c=rc.comp.CampaignAsk.getAskValue();c&&c.frequency&&(b[rc.ns+"giving_giving_frequency__c"]=c.frequency,b[rc.ns+"giving_giving_amount__c"]=c.finalAmount,b[rc.ns+"giving_is_sustainer__c"]=c.frequency!=rc.givingFreqOnePymt?"true":"false");var d=rc.upsertData.done;rc.isPaymentTransactional&&rc.pendingPayment&&(b.__action=rc.actions.processPaymentAndForm,d=function(a,b,c,d){if(!rc.pendingPayment)return rc.upsertData.done(a,b,c,d);try{var e=rc.pendingPayment;rc.pendingPayment=null,rc.ui.releaseProcessingModal(),c=c||{},c.__data&&rc.setParam("data",c.__data);var f=jQuery.isEmptyObject(c)||"Flagged"==c[rc.ns+"batch_upload_status__c"];if("true"!=c.isSuccess){var g="Denied: "+c.responseMessage+"  "+c.responseCode;rc.wf.forceFail(e.deferred,a.workflowGuid,g)}else f&&(rc.clearPublicToken(b,c),rc.wf.forceFail(rc.wf.retroactiveFailure,a.workflowGuid,c[rc.ns+"batch_upload_flagged_reason__c"]))}catch(h){"true"==c.isSuccess&&rc.clearPublicToken(b,c),rc.wf.forceFail(rc.wf.retroactiveFailure,a.workflowGuid,h)}});var e=$("#"+a.workflowGuid);if(e.find('[data-component-type="workflow-action"]').each(function(){var a=$(this),c=a.attr("data-context"),e=(a.attr("id"),a.attr("data-method")),f=a.attr("exclude-giving"),g=a.attr("exclude-events");"then"==c&&"send-data"==e&&((null==f||void 0===f)&&(f="true"),b[rc.ns+"exclude_giving__c"]=f,null==g||void 0===g||"true"==g?g="false":"false"==g&&(g="true"),b[rc.ns+"process_events__c"]=g)}),0!=$(".form-group.has-error").length)return a.reject(b);if(b=rc.cleanKeysToLower(b),rc.isPaymentTransactional&&rc.pendingPayment)for(name in rc.pendingPayment.processorParams)b[name]=rc.pendingPayment.processorParams[name];return rc.dataModal.BatchUploadModel=$.extend(rc.dataModal.BatchUploadModel,b),rc.comp.remoting.send(a,b,d,rc.upsertData.fail),a.promise()},rc.upsertData.validateCustomComponents=function(){return 0==rc.comp.CampaignAsk.validateAskValue()?!1:0==rc.comp.Cart.validate()?!1:0==rc.comp.Session.validate()?!1:!0},rc.upsertData.validate=function(){var a=$(this),b=a.val()?!0:!1,c=$($("#rc-error-label").html());if("checkbox"===$(this).attr("type"))return $(a).is(":checked")?"true":"false",!0;if(a.hasClass("validate-field")&&a.closest(".form-group").hasClass("has-error"))return!1;if(a.closest(".input-group").prev(".rc-error-label").remove(),a.closest(".input-group").removeClass("has-error"),"otherAmount"==a.attr("data-validate-type")&&b){var d=rc.comp.CampaignAsk.frequencyAmountMinThreshold[a.parent().attr("data-giving-frequency")],e=$.trim(a.val());a.val(e),e.match(/^\d+\.?\d{0,2}$/)?void 0!=d&&parseFloat(e)<parseFloat(d)&&(c.find(".label-text").text("The amount which you entered should be greater than the minimum threshold amount: $"+d),a.closest(".input-group").before(c),a.closest(".input-group").addClass("has-error")):(c.find(".label-text").text("The Amount must be a number with only 2 decimal places"),a.closest(".input-group").before(c),a.closest(".input-group").addClass("has-error"))}if("csv-email"==a.attr("data-validate-type")&&b){for(var f=a.val()||"",g=f.split(","),h=[],i=0;i<g.length;++i){var j=$.trim(g[i]);null!=j&&j&&(rc.wf.process.SendMail.isValidMergeField(j)||rc.wf.process.SendMail.isValidEmail(j)||h.push(j))}if(h.length>0){var k="Invalid Email(s): "+h.join(",");c.find(".label-text").text(k),a.closest(".input-group").before(c),a.closest(".input-group").addClass("has-error")}}{var l=a.closest(".rc-component-credit-card").find('[name="'+rc.ns+'payment_method_card_expiration_month__c"]');a.closest(".rc-component-credit-card").find('[name="'+rc.ns+'payment_method_card_expiration_year__c"]')}if(a.attr("name")==rc.ns+"payment_method_card_expiration_month__c"){var n=parseInt(l.val(),10);0==n&&(a.closest(".input-group").addClass("has-error"),c.find(".label-text").text("Invalid month - please update and resubmit."),a.closest(".input-group").before(c),rc.ui.showMessagePopup(rc.ui.ERROR,"Invalid month - please update and resubmit."))}},rc.upsertData.done=function(a,b,c){rc.setParam("data",c.__data),rc.pendingPayment=null,rc.ui.releaseProcessingModal()},rc.upsertData.fail=function(){rc.pendingPayment=null,rc.ui.releaseProcessingModal()},rc.validate=function(){},rc.validate.populateUpsertFormData=function(a){var b={},c={};
if(!a)return b;a=$(a);var d,e;return a.find(".rc-component-content .form-control[name],.rc-component-content .form-control[data-name]").each(function(a,f){return f=$(f),d=f.attr("name")||f.attr("data-name")||"",e=f.attr("data-validate-type")||"",d?(f.hasClass("validate-field")&&(b[d]=e),void(c[d]="true"==$(f).closest("[data-validatation-disabled]").attr("data-validatation-disabled")?!0:!1)):!0}),{validatorInfo:b,validatorDisableFlags:c}},rc.validate.initializeComponentData=function(a,b){if(b.validatorDisableFlags&&b.validatorInfo)for(var d,e,f,c=rc.getKeys(b.validatorDisableFlags),g=0;g<c.length;++g)d=c[g],validators=b.validatorInfo?b.validatorInfo[d]:"",f=b.validatorDisableFlags&&1==b.validatorDisableFlags[d]?"true":"false",e=$(a).find('.form-control[name="'+d+'"],.form-control[data-name="'+d+'"]'),"true"==f?($(e).closest("[data-validatation-disabled]").attr("data-validatation-disabled",f),$(e).closest("[data-validatation-disabled]").find('[data-cascade="data-validatation-disabled"]').trigger("click")):$(e).closest("[data-validatation-disabled]").attr("data-validatation-disabled","false"),$(e).attr("data-validate-type",validators)},rc.enableLocalOnly=function(a){var b=$('#rc-page-container [data-local-only="true"] input.rc-field-name[data-name]');b.each(function(b,c){0==a?(c=$(c),c.attr("name",c.attr("data-name"))):1==a&&(c=$(c),c.removeAttr("name"))})},rc.validate.initialize=function(){rc.enableLocalOnly(!1),$("#rc-page-container").bootstrapValidator({framework:"bootstrap",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"}}),$("#rc-page-container .rc-component-content .form-control[name]").each(function(a,b){b=$(b),rc.validate.initializeFieldValidator(b)})},rc.validate.isFieldValidatorsDisabled=function(a){return"true"==a.closest("[data-validatation-disabled]").attr("data-validatation-disabled")},rc.validate.isFieldRequired=function(a){return"true"==a.closest("[data-required]").attr("data-required")},rc.validate.initializeFieldValidator=function(a){var b,c,d,a=$(a),b=a.attr("name");if(!b)return!0;a.hasClass("validate-field")?(d=a.attr("data-validate-type"),d&&(c=d.split(";"))):rc.validate.fieldValidator[b]&&rc.validate.fieldValidator[b].length>0&&(c=rc.validate.fieldValidator[b],d=c.join(";"),a.attr("data-validate-type",d),a.addClass("validate-field")),"true"==rc.validationsEnabled&&c&&1!=rc.validate.isFieldValidatorsDisabled(a)||(c=[]);var g=$.inArray("notEmpty",c);return 1==rc.validate.isFieldRequired(a)?-1==g&&c.push("notEmpty"):-1!=g&&c.splice(c,1),rc.validate.initializeFieldValidatorRules(b,c)},rc.validate.initializeFieldValidatorRules=function(a,b){if(!b||!b.length)return!1;for(var c,d={},e=0;e<b.length;++e)c=b[e],c&&(c=rc.validate.getValidator(c),d=$.extend(d,c));d={validators:d};try{$("#rc-page-container").bootstrapValidator("removeField",a)}catch(f){}return $("#rc-page-container").bootstrapValidator("addField",a,d),!0},rc.validate.getValidator=function(a){return rc.validate.validatorMap[a]},rc.validate.isFormValid=function(){var a=$("#rc-page-container"),b=a.data("bootstrapValidator");return b.validate(),b.isValidContainer(a)},rc.validate.validateField=function(a){a&&$("#rc-page-container").bootstrapValidator("revalidateField",a)},rc.validatorsRequiringCountry=["zipCode","iban","phone"],rc.validate.fieldValidator={},rc.validate.fieldValidator[rc.ns+"address_country__c"]=["countryCode"],rc.validate.fieldValidator[rc.ns+"address_country_name__c"]=["country"],rc.validate.fieldValidator[rc.ns+"address_postal_code__c"]=["zipCode"],rc.validate.fieldValidator[rc.ns+"address_state__c"]=["state"],rc.validate.fieldValidator[rc.ns+"address_zip__c"]=["zipCode"],rc.validate.fieldValidator[rc.ns+"address_2_city__c"]=["city"],rc.validate.fieldValidator[rc.ns+"address_2_country__c"]=["countryCode"],rc.validate.fieldValidator[rc.ns+"address_2_country_name__c"]=["country"],rc.validate.fieldValidator[rc.ns+"address_2_postal_code__c"]=["zipCode"],rc.validate.fieldValidator[rc.ns+"address_2_state__c"]=["state"],rc.validate.fieldValidator[rc.ns+"address_2_zip__c"]=["zipCode"],rc.validate.fieldValidator[rc.ns+"address_city__c"]=["city"],rc.validate.fieldValidator[rc.ns+"contact_1_email__c"]=["email"],rc.validate.fieldValidator[rc.ns+"contact_2_email__c"]=["email"],rc.validate.fieldValidator[rc.ns+"contact_1_phone_1__c"]=["phone"],rc.validate.fieldValidator[rc.ns+"contact_1_phone_2__c"]=["phone"],rc.validate.fieldValidator[rc.ns+"contact_2_phone_1__c"]=["phone"],rc.validate.fieldValidator[rc.ns+"contact_2_phone_2__c"]=["phone"],rc.validate.fieldValidator[rc.ns+"event_purchase_giving_amount__c"]=["amount"],rc.validate.fieldValidator[rc.ns+"giving_check_date__c"]=["date"],rc.validate.fieldValidator[rc.ns+"giving_close_date__c"]=["date"],rc.validate.fieldValidator[rc.ns+"giving_close_date_time__c"]=["datetime"],rc.validate.fieldValidator[rc.ns+"giving_giving_amount__c"]=["amount"],rc.validate.fieldValidator[rc.ns+"giving_giving_years__c"]=["year"],rc.validate.fieldValidator[rc.ns+"giving_record_amount__c"]=["amount"],rc.validate.fieldValidator[rc.ns+"payment_method_billing_email__c"]=["email"],rc.validate.fieldValidator[rc.ns+"payment_method_billing_phone__c"]=["phone"],rc.validate.fieldValidator[rc.ns+"payment_method_card_expiration_date__c"]=["date"],rc.validate.fieldValidator[rc.ns+"payment_method_card_expiration_month__c"]=["monthExpiration"],rc.validate.fieldValidator[rc.ns+"payment_method_card_expiration_year__c"]=["yearExpiration"],rc.validate.fieldValidator[rc.ns+"payment_method_card_last_four_digits__c"]=["numeric"],rc.validate.fieldValidator[rc.ns+"payment_method_card_number__c"]=["creditCard"],rc.validate.fieldValidator[rc.ns+"payment_method_card_security_code__c"]=["cvv"],rc.validate.fieldValidator[rc.ns+"preferences_1_end_date__c"]=["date"],rc.validate.fieldValidator[rc.ns+"preferences_1_start_date__c"]=["date"],rc.validate.fieldValidator[rc.ns+"preferences_2_end_date__c"]=["date"],rc.validate.fieldValidator[rc.ns+"preferences_2_start_date__c"]=["date"],rc.validate.fieldValidator[rc.ns+"recipient_city__c"]=["city"],rc.validate.fieldValidator[rc.ns+"recipient_country__c"]=["country"],rc.validate.fieldValidator[rc.ns+"recipient_email__c"]=["email"],rc.validate.fieldValidator[rc.ns+"recipient_phone__c"]=["phone"],rc.validate.fieldValidator[rc.ns+"recipient_postal_code__c"]=["zipCode"],rc.validate.fieldValidator[rc.ns+"recipient_preferred_email__c"]=["email"],rc.validate.fieldValidator[rc.ns+"recipient_preferred_phone__c"]=["phone"],rc.validate.fieldValidator[rc.ns+"recipient_state_province__c"]=["state"],rc.validate.validatorMap={notEmpty:{notEmptyRC:{message:"This field is required"}},email:{regexp:{regexp:"^[^@\\s]+@([^@\\s]+\\.)+[^@\\s]+$",message:"Please enter a valid email address"}},phone:{phone_US_RC:{message:"The value is not valid US phone number",transformer:function(a){var d=a.val();return d=d.replace(/\D/g,""),/^(\d){3}(\s+)(\d){3}(\s+)(\d){4}$/.test(d)?d.replace(/\s/g,""):d}}},city:{regexp:{regexp:/^([a-zA-Z\u0080-\u024F]+(?:. |-| |'|,))*[a-zA-Z\u0080-\u024F]*([a-zA-Z]{1}\.[a-zA-Z]{1}\.)*$/,message:"Please enter a valid City name"}},country:{regexp:{regexp:/^([a-zA-Z\u0080-\u024F]+(?:. |-| |'))*[a-zA-Z\u0080-\u024F]*$/,message:"Please enter a valid Country name"}},state:{regexp:{regexp:/\b([A-Za-z]{2})\b/,message:"Please enter a valid State abbreviation"},stringLength:{min:2,max:2,message:"A valid State abbreviation can have only two characters"}},countryCode:{regexp:{regexp:/\b([A-Za-z]{2}|[A-Za-z]{3})\b/,message:"Please enter a valid Country abbreviation"},stringLength:{min:2,max:3,message:"A valid Country abbreviation can have only two or three characters"}},creditCard:{creditCard:{message:"Please enter a valid Credit Card number",transformer:function(a){var d=a.val();return d.replace(/\s/g,"")}}},zipCode:{zipCode:{country:"US",message:"The value is not a valid zipcode"}},date:{date:{format:"YYYY-MM-DD",message:"The value is not a valid date, must in format YYYY-MM-DD"}},cvv:{cvv:{creditCardField:rc.ns+"payment_method_card_number__c",message:"The CVV number is not valid"}},monthExpiration:{between:{min:1,max:12,inclusive:!0,message:"The month must be between 01 and 12"},digits:{message:"The expiration month can contain digits only"},callback:{message:"Expired",callback:function(a,b){a=parseInt(a,10);var d=$('[name="'+rc.ns+'payment_method_card_expiration_year__c"]').val(),e=(new Date).getMonth()+1,f=(new Date).getFullYear();return a<0||a>12?!1:""==d?!0:(d=parseInt(d,10),d>f||d==f&&a>=e?(b.updateStatus(rc.ns+"payment_method_card_expiration_year__c","VALID"),!0):!1)}}},yearExpiration:{numeric:{message:"The year must be a number"},callback:{message:"Expired",callback:function(a,b){a=parseInt(a,10);var d=$('[name="'+rc.ns+'payment_method_card_expiration_month__c"]').val(),e=(new Date).getMonth()+1,f=(new Date).getFullYear();return a<f?!1:""==d?!1:(d=parseInt(d,10),a>f||a==f&&d>=e?(b.updateStatus(rc.ns+"payment_method_card_expiration_month__c","VALID"),!0):!1)}}},amount:{regexp:{regexp:/^\d+\.?\d{0,2}$/,message:"The Amount must be a number with only 2 decimal places"}}},function(a){a.fn.bootstrapValidator.i18n.notEmptyRC=a.extend(a.fn.bootstrapValidator.i18n.notEmptyRC||{},{"default":"Please enter a value"}),a.fn.bootstrapValidator.validators.notEmptyRC={enableByHtml5:function(a){var b=a.attr("required")+"";return"required"===b||"true"===b},validate:function(b,c){if("edit"==rc.getCurrentMode())return!0;var e=c.attr("type");return"radio"===e||"checkbox"===e?b.getFieldElements(c.attr("data-bv-field")).filter(":checked").length>0:"number"===e&&c.get(0).validity&&c.get(0).validity.badInput===!0?!0:""!==a.trim(c.val())}}}(window.jQuery),function(a){a.fn.bootstrapValidator.i18n.phone_US_RC=a.extend(a.fn.bootstrapValidator.i18n.phone_US_RC||{},{"default":"Please enter a valid phone number"}),a.fn.bootstrapValidator.validators.phone_US_RC={validate:function(a,b){var d=b.val();if(""===d)return!0;d=d.replace(/\D/g,"");var e=/^(?:(1\-?)|(\+1 ?))?\(?(\d{3})[\)\-\.]?(\d{3})[\-\.]?(\d{4})$/.test(d)&&(10===d.length||11===d.length);return e}}}(window.jQuery),rc.initializeFormApp();
